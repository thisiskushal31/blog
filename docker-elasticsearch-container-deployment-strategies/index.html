<!DOCTYPE html><html lang="en" class="light"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker Elasticsearch - Container Deployment Strategies | Kushal Gupta Tech Blog</title>
    <meta name="description" content="Comprehensive guide to deploying Elasticsearch with Docker including multi-node setups, Docker Compose configurations, production considerations, and best practices.">
    <meta name="author" content="Kushal Gupta">
    <meta name="keywords" content="Kushal Gupta, Kushal Gupta Platform Engineer, Kushal Gupta Software Engineer, Kushal Gupta DevOps Engineer, Kushal Gupta MLOps Engineer, Kushal Gupta AI Engineer, Kushal Gupta Engineer, Kushal Gupta Developer, Kushal Gupta Programmer, Kushal Gupta Tech, Kushal Gupta Blog, Kushal Gupta Professional, Kushal Gupta India, Platform Engineer India, Software Engineer India, DevOps Engineer India, MLOps Engineer India, AI Engineer India, Machine Learning Engineer India, Engineer India, Developer India, Programmer India, Tech Professional India, Technology Expert India, Full Stack Engineer India, Backend Engineer India, Frontend Engineer India, System Architect India, Software Architect India, Cloud Architect India, Solutions Architect India, Production Engineer India, Platform Engineer, Software Engineer, DevOps Engineer, MLOps Engineer, AI Engineer, Machine Learning Engineer, Engineer, Developer, Programmer, Tech Professional, Technology Expert, Full Stack Engineer, Backend Engineer, Frontend Engineer, System Architect, Software Architect, Cloud Architect, Solutions Architect, Production Engineer, Production Systems Engineer, Platform Development, Software Development, Cloud Computing, Infrastructure, Automation, Kubernetes, AWS, GCP, Azure, CI/CD, Terraform, GitOps, DevSecOps, MLOps, AI/ML, Machine Learning, Deep Learning, Artificial Intelligence, Data Science, Data Engineering, Platform Engineering, Infrastructure as Code, Microservices, Cloud-Native, Site Reliability Engineering, SRE, Tech Blog, Technology Blog, Programming Blog, Developer Blog, Engineering Blog, Technical Writing, Tech Articles, Software Articles, Programming Articles, Engineering Articles, Technology Content, Tech Content, Software Content, Programming Content, Engineering Content, Technology Insights, Tech Insights, Software Insights, Programming Insights, Engineering Insights, Technology Tutorials, Tech Tutorials, Software Tutorials, Programming Tutorials, Engineering Tutorials, Technology Guides, Tech Guides, Software Guides, Programming Guides, Engineering Guides">
    
    <!-- Google Search Console Verification -->
    <meta name="google-site-verification" content="rNdu4NokL3QVj_CH_zYaJ5XnbMFLST-u_ZQuRwrS67I">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://thisiskushal31.github.io/blog/docker-elasticsearch-container-deployment-strategies">
    
    <!-- Professional Keywords for Search -->
    <meta name="subject" content="Kushal Gupta - Engineer, Developer &amp; Tech Professional">
    <meta name="classification" content="Technology, Engineering, Software Development, Programming, Cloud Computing, DevOps">
    <meta name="category" content="Technology Blog, Engineering Blog, Developer Blog, Programming Blog">
    <meta name="coverage" content="Worldwide">
    <meta name="distribution" content="Global">
    <meta name="rating" content="General">
    <meta name="revisit-after" content="7 days">
    <meta name="target" content="all">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    
    <!-- Additional Generic Search Terms -->
    <meta name="application-name" content="Kushal Gupta Tech Blog">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Kushal Gupta Blog">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Docker Elasticsearch - Container Deployment Strategies">
    <meta property="og:description" content="Comprehensive guide to deploying Elasticsearch with Docker including multi-node setups, Docker Compose configurations, production considerations, and best practices.">
    <meta property="og:image" content="https://thisiskushal31.github.io/blog/blog/blogImages/elasticsearch-deployment-guide.png">
    <meta property="og:url" content="https://thisiskushal31.github.io/blog/docker-elasticsearch-container-deployment-strategies">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kushal Gupta | Tech Blog">
    <meta name="twitter:description" content="Tech blog with software development, cloud computing, and DevOps content. Practical guides for developers.">
    <meta name="twitter:image" content="https://thisiskushal31.github.io/og.png">

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Kushal Gupta",
        "alternateName": ["Kushal Gupta Platform Engineer", "Kushal Gupta Software Engineer", "Kushal Gupta DevOps Engineer", "Kushal Gupta MLOps Engineer", "Kushal Gupta AI Engineer", "Kushal Gupta Engineer", "Kushal Gupta Developer", "Kushal Gupta Programmer", "Kushal Gupta Tech", "Kushal Gupta Blog", "Kushal Gupta Professional", "Kushal Gupta India"],
        "jobTitle": ["Platform Engineer", "Software Engineer", "DevOps Engineer", "MLOps Engineer", "AI Engineer", "Machine Learning Engineer", "Full Stack Engineer", "System Architect", "Cloud Architect", "Production Engineer", "Engineer", "Developer", "Programmer", "Tech Professional", "Technology Expert"],
        "description": "Kushal Gupta - Tech Professional. Blog with articles on software development, cloud computing, and DevOps.",
        "url": "https://thisiskushal31.github.io/blog/",
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "India"
        },
        "knowsAbout": ["Software Development", "Cloud Computing", "DevOps", "Platform Engineering", "MLOps", "AI/ML", "Machine Learning", "Deep Learning", "Artificial Intelligence", "Data Science", "Data Engineering", "Full Stack Development", "Backend Development", "Frontend Development", "System Architecture", "Software Architecture", "Cloud Architecture", "Production Engineering", "Programming", "Technology", "Engineering", "Infrastructure", "Automation", "Kubernetes", "Docker", "AWS", "GCP", "Azure", "CI/CD", "Terraform", "GitOps", "DevSecOps", "Infrastructure as Code", "Microservices", "Cloud-Native", "Site Reliability Engineering", "SRE", "Monitoring", "Observability", "Security Engineering", "Performance Optimization", "Scalable Systems", "High Availability", "Technical Writing", "Tech Blogging", "Programming Tutorials", "Technology Guides", "System Design", "Containerization", "Orchestration", "Technical Consulting", "Remote Work", "Global Teams", "International Projects"],
        "sameAs": [
          "https://github.com/thisiskushal31",
          "https://www.linkedin.com/in/thisiskushalgupta/"
        ]
      }
    </script>

    <!-- Preload fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet">

    <!-- Font Awesome for social media icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">

    <!-- Favicon -->
    <link rel="icon" href="/blog/favicon.ico" type="image/x-icon">

    <!-- Theme color (optional, if PWA or mobile) -->
    <meta name="theme-color" content="#ffffff">
    <script type="module" crossorigin="" src="/blog/assets/index-D85vkkJh.js"></script>
    <link rel="stylesheet" crossorigin="" href="/blog/assets/index-DBt49E5R.css">
  <style type="text/css">:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
</style><style type="text/css">:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
</style><style type="text/css">:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
</style><style type="text/css">:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
</style><script type="application/ld+json" data-blog-post="true">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker Elasticsearch - Container Deployment Strategies","description":"Comprehensive guide to deploying Elasticsearch with Docker including multi-node setups, Docker Compose configurations, production considerations, and best practices.","url":"https://thisiskushal31.github.io/blog/docker-elasticsearch-container-deployment-strategies","datePublished":"2025-08-24","author":{"@type":"Person","name":"Kushal Gupta","url":"https://thisiskushal31.github.io"},"publisher":{"@type":"Person","name":"Kushal Gupta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://thisiskushal31.github.io/blog/docker-elasticsearch-container-deployment-strategies"}}</script></head>

  <body style="font-family: 'Inter', sans-serif;">
    <div id="root"><div class="min-h-screen bg-background"><main><div class="min-h-screen bg-background"><div class="fixed top-0 left-0 right-0 z-50 bg-card/80 backdrop-blur-md border-b border-border shadow-card transition-all duration-300 ease-in-out transform translate-y-0 opacity-100"><div class="max-w-7xl mx-auto px-3 py-2"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><a class="flex items-center gap-2 hover:opacity-80 transition-opacity" href="#/"><div class="w-8 h-8 rounded-full overflow-hidden bg-teal-500 flex items-center justify-center"><img src="/blog/profile.jpeg" alt="Kushal Gupta" class="w-full h-full object-cover"></div><div class="flex flex-col"><span class="font-bold text-sm text-foreground">Kushal Gupta</span><span class="text-xs text-muted-foreground">Tech Blog</span></div></a></div><div class="flex items-center space-x-3"><a href="https://github.com/thisiskushal31" target="_blank" rel="noopener noreferrer" class="p-2 text-gray-600 hover:text-gray-900 bg-gray-50 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg border border-gray-200 hover:border-gray-300 dark:border-gray-700 dark:hover:border-gray-600 transition-all duration-200 hover:scale-110 hover:shadow-md" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github w-4 h-4"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a href="https://www.linkedin.com/in/thisiskushalgupta/" target="_blank" rel="noopener noreferrer" class="p-2 text-blue-600 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:hover:text-blue-300 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 rounded-lg border border-blue-200 hover:border-blue-300 dark:border-blue-800 dark:hover:border-blue-700 transition-all duration-200 hover:scale-110 hover:shadow-md" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin w-4 h-4"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="https://thisiskushal31.github.io/link/" target="_blank" rel="noopener noreferrer" class="p-2 text-purple-600 hover:text-purple-700 bg-purple-50 hover:bg-purple-100 dark:text-purple-400 dark:hover:text-purple-300 dark:bg-purple-900/20 dark:hover:bg-purple-900/30 rounded-lg border border-purple-200 hover:border-purple-300 dark:border-purple-800 dark:hover:border-purple-700 transition-all duration-200 hover:scale-110 hover:shadow-md" title="My Profile &amp; Links"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link w-4 h-4"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a><a href="#" class="p-2 text-gray-600 hover:text-gray-900 bg-gray-50 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg border border-gray-200 hover:border-gray-300 dark:border-gray-700 dark:hover:border-gray-600 transition-all duration-200 hover:scale-110 hover:shadow-md" title="Copy Link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-4 h-4"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></a><button class="p-2 text-gray-600 hover:text-gray-900 bg-gray-50 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg border border-gray-200 hover:border-gray-300 dark:border-gray-700 dark:hover:border-gray-600 transition-all duration-200 hover:scale-110 hover:shadow-md" title="Switch to dark mode"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon w-4 h-4"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div></div></div></div><div class="fixed bottom-6 right-6 z-50 flex flex-col gap-3"><button class="w-12 h-12 bg-teal-600 hover:bg-teal-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 flex items-center justify-center border border-teal-500" title="Go to Home"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house w-5 h-5"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg></button></div><div class="relative w-full h-64 md:h-80 lg:h-96 overflow-hidden -mt-16 pt-16"><img src="/blog/blogImages/elasticsearch-deployment-guide.png" alt="Docker Elasticsearch - Container Deployment Strategies" class="w-full h-full object-cover"><div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"></div></div><header class="py-12 px-4 hero-gradient "><div class="max-w-4xl mx-auto"><a class="inline-flex items-center text-muted-foreground hover:text-primary transition-colors duration-200 mb-8 group" href="#/blog"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform duration-200"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>Back to Blog</a><div class="space-y-6"><div class="flex flex-wrap gap-2"><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag w-3 h-3 mr-1"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Docker</span><span class="tag"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag w-3 h-3 mr-1"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Containers</span></div><h1 class="text-4xl md:text-5xl font-bold text-foreground leading-tight">Docker Elasticsearch - Container Deployment Strategies</h1><p class="text-xl text-muted-foreground leading-relaxed">Comprehensive guide to deploying Elasticsearch with Docker including multi-node setups, Docker Compose configurations, production considerations, and best practices.</p><div class="flex flex-wrap items-center gap-6 text-muted-foreground"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar w-4 h-4"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg><span>August 24, 2025</span></div><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-4 h-4"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>5 min read</span></div><button class="flex items-center space-x-2 hover:text-primary transition-colors duration-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share2 w-4 h-4"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line></svg><span>Share</span></button></div></div></div></header><article class="py-12 px-4"><div class="max-w-4xl mx-auto"><div class="glass-card p-8 md:p-12"><div class="blog-markdown"><div>
        <h1 id="containerized-elasticsearch-docker-production-strategies" class="group relative scroll-mt-20 text-3xl font-bold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#containerized-elasticsearch-docker-production-strategies">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Containerized Elasticsearch: Docker Production Strategies</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#containerized-elasticsearch-docker-production-strategies" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h1>
      
<p><em>Master production-ready Elasticsearch deployments using Docker containers with advanced orchestration patterns</em></p>
<hr>

        <h2 id="introduction-why-docker-for-elasticsearch-production" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#introduction-why-docker-for-elasticsearch-production">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Introduction: Why Docker for Elasticsearch Production?</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#introduction-why-docker-for-elasticsearch-production" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      
<p>While Kubernetes gets most of the container orchestration attention, Docker-based deployments offer a compelling middle ground between self-managed VMs and full Kubernetes complexity. For many organizations, Docker provides the perfect balance of containerization benefits without the operational overhead of Kubernetes.</p>

        <h2 id="tl-dr" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#tldr">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>TL;DR</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#tl-dr" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      
<ul>
<li><strong>What:</strong> Production-ready Elasticsearch with Docker and Docker Compose for single-node and small clusters</li>
<li><strong>When to use:</strong> Single-node deployments, development environments, or when you want containers without Kubernetes complexity</li>
<li><strong>Reading time:</strong> 6-8 minutes</li>
<li><strong>Implementation time:</strong> 30 minutes to 2 hours depending on complexity</li>
<li><strong>Key takeaway:</strong> Fastest way to get containerized Elasticsearch running with minimal infrastructure overhead</li>
<li><strong>Skip if:</strong> You need high availability, auto-scaling, or are already using Kubernetes</li>
</ul>
<p><strong>Key Advantages of Docker-based Elasticsearch:</strong></p>
<ul>
<li><strong>Simplified Operations</strong>: Easier to manage than Kubernetes, more flexible than VMs</li>
<li><strong>Environment Consistency</strong>: Identical containers across development, staging, and production</li>
<li><strong>Resource Efficiency</strong>: Better utilization than VMs, simpler than Kubernetes</li>
<li><strong>Rapid Deployment</strong>: Faster container startup compared to VM provisioning</li>
<li><strong>Cost Optimization</strong>: Lower operational overhead than managed services</li>
</ul>
<p><strong>When Docker Makes Sense:</strong></p>
<ul>
<li>Medium-scale deployments (1-50TB of data)</li>
<li>Teams with Docker expertise but limited Kubernetes experience</li>
<li>Hybrid cloud or multi-cloud strategies</li>
<li>Cost-conscious organizations wanting container benefits</li>
<li>Applications requiring custom Elasticsearch configurations</li>
</ul>
<hr>

        <h2 id="production-docker-architecture-patterns" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#production-docker-architecture-patterns">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Production Docker Architecture Patterns</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#production-docker-architecture-patterns" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      
<blockquote class="border-l-4 border-gray-300 dark:border-gray-600 pl-4 my-4 text-gray-600 dark:text-gray-400">
<p> <strong>Learning Elasticsearch basics?</strong> Check out my <a href="https://thisiskushal31.github.io/dochub/#/databases/nosql/elasticsearch/README.md#overview--getting-started" target="_blank" rel="noopener noreferrer">Elasticsearch Overview &amp; Getting Started Deep Dive</a> for comprehensive cluster setup and configuration guidance.</p>
</blockquote>

        <h3 id="pattern-1-docker-compose-multi-node-cluster" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#pattern-1-docker-compose-multi-node-cluster">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Pattern 1: Docker Compose Multi-Node Cluster</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#pattern-1-docker-compose-multi-node-cluster" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<p>The most common production Docker pattern uses Docker Compose to orchestrate multi-node Elasticsearch clusters with dedicated roles.</p>
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># docker-compose.production.yml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment"># Master-eligible nodes (cluster coordination)</span>
  <span class="token key atrule">es-master-1</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.name=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span>
      <span class="token punctuation">-</span> node.roles=master
      <span class="token punctuation">-</span> cluster.name=production<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span>
      <span class="token punctuation">-</span> discovery.seed_hosts=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">2</span>
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms2g -Xmx2g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.http.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.transport.ssl.truststore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.http.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
    <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
      <span class="token key atrule">memlock</span><span class="token punctuation">:</span>
        <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">-1</span>
        <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">-1</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> master1<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> es<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
      <span class="token punctuation">-</span> ./elasticsearch.yml<span class="token punctuation">:</span>/usr/share/elasticsearch/config/elasticsearch.yml<span class="token punctuation">:</span>ro
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 4G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 2G
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token key atrule">es-master-2</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.name=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span>
      <span class="token punctuation">-</span> node.roles=master
      <span class="token punctuation">-</span> cluster.name=production<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span>
      <span class="token punctuation">-</span> discovery.seed_hosts=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">2</span>
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms2g -Xmx2g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.http.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.transport.ssl.truststore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.http.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
    <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
      <span class="token key atrule">memlock</span><span class="token punctuation">:</span>
        <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">-1</span>
        <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">-1</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> master2<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> es<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
      <span class="token punctuation">-</span> ./elasticsearch.yml<span class="token punctuation">:</span>/usr/share/elasticsearch/config/elasticsearch.yml<span class="token punctuation">:</span>ro
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 4G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 2G
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token key atrule">es-master-3</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.name=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span>
      <span class="token punctuation">-</span> node.roles=master
      <span class="token punctuation">-</span> cluster.name=production<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span>
      <span class="token punctuation">-</span> discovery.seed_hosts=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">2</span>
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms2g -Xmx2g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.http.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.transport.ssl.truststore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.http.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
    <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
      <span class="token key atrule">memlock</span><span class="token punctuation">:</span>
        <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">-1</span>
        <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">-1</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> master3<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> es<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
      <span class="token punctuation">-</span> ./elasticsearch.yml<span class="token punctuation">:</span>/usr/share/elasticsearch/config/elasticsearch.yml<span class="token punctuation">:</span>ro
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 4G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 2G
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token comment"># Data nodes (indexing and search)</span>
  <span class="token key atrule">es-data-1</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">1</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.name=es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">1</span>
      <span class="token punctuation">-</span> node.roles=data<span class="token punctuation">,</span>ingest
      <span class="token punctuation">-</span> cluster.name=production<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span>
      <span class="token punctuation">-</span> discovery.seed_hosts=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">2</span>
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms8g -Xmx8g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.http.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.transport.ssl.truststore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.http.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
    <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
      <span class="token key atrule">memlock</span><span class="token punctuation">:</span>
        <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">-1</span>
        <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">-1</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> data1<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> es<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
      <span class="token punctuation">-</span> ./elasticsearch.yml<span class="token punctuation">:</span>/usr/share/elasticsearch/config/elasticsearch.yml<span class="token punctuation">:</span>ro
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 16G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 8G
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token key atrule">es-data-2</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">2</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.name=es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">2</span>
      <span class="token punctuation">-</span> node.roles=data<span class="token punctuation">,</span>ingest
      <span class="token punctuation">-</span> cluster.name=production<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span>
      <span class="token punctuation">-</span> discovery.seed_hosts=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">1</span>
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms8g -Xmx8g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.http.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.transport.ssl.truststore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.http.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
    <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
      <span class="token key atrule">memlock</span><span class="token punctuation">:</span>
        <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">-1</span>
        <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">-1</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> data2<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> es<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
      <span class="token punctuation">-</span> ./elasticsearch.yml<span class="token punctuation">:</span>/usr/share/elasticsearch/config/elasticsearch.yml<span class="token punctuation">:</span>ro
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 16G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 8G
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token comment"># Coordinating node (load balancer for client requests)</span>
  <span class="token key atrule">es-coordinating</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> es<span class="token punctuation">-</span>coordinating
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.name=es<span class="token punctuation">-</span>coordinating
      <span class="token punctuation">-</span> node.roles=""
      <span class="token punctuation">-</span> cluster.name=production<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span>
      <span class="token punctuation">-</span> discovery.seed_hosts=es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">2</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>master<span class="token punctuation">-</span><span class="token number">3</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">1</span><span class="token punctuation">,</span>es<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">2</span>
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms4g -Xmx4g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.http.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.transport.ssl.truststore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
      <span class="token punctuation">-</span> xpack.security.http.ssl.keystore.path=/usr/share/elasticsearch/config/certs/elastic<span class="token punctuation">-</span>certificates.p12
    <span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
      <span class="token key atrule">memlock</span><span class="token punctuation">:</span>
        <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">-1</span>
        <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">-1</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> coordinating<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> es<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
      <span class="token punctuation">-</span> ./elasticsearch.yml<span class="token punctuation">:</span>/usr/share/elasticsearch/config/elasticsearch.yml<span class="token punctuation">:</span>ro
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9200:9200"</span>
      <span class="token punctuation">-</span> <span class="token string">"9300:9300"</span>
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 8G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 4G
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token comment"># Kibana for cluster management</span>
  <span class="token key atrule">kibana</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/kibana/kibana<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> kibana
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ELASTICSEARCH_HOSTS=https<span class="token punctuation">:</span>//es<span class="token punctuation">-</span>coordinating<span class="token punctuation">:</span><span class="token number">9200</span>
      <span class="token punctuation">-</span> ELASTICSEARCH_USERNAME=kibana_system
      <span class="token punctuation">-</span> ELASTICSEARCH_PASSWORD=$<span class="token punctuation">{</span>KIBANA_PASSWORD<span class="token punctuation">}</span>
      <span class="token punctuation">-</span> ELASTICSEARCH_SSL_CERTIFICATEAUTHORITIES=/usr/share/kibana/config/certs/ca.crt
      <span class="token punctuation">-</span> SERVER_SSL_ENABLED=true
      <span class="token punctuation">-</span> SERVER_SSL_CERTIFICATE=/usr/share/kibana/config/certs/kibana.crt
      <span class="token punctuation">-</span> SERVER_SSL_KEY=/usr/share/kibana/config/certs/kibana.key
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> kibana<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/kibana/config/certs
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"5601:5601"</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> es<span class="token punctuation">-</span>coordinating
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f http://localhost:5601/api/status || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">master1-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">master2-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">master3-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">data1-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">data2-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">coordinating-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">es-certs</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">kibana-certs</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">elastic-network</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
    <span class="token key atrule">ipam</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">subnet</span><span class="token punctuation">:</span> 172.20.0.0/16
</code></pre>
</div>

        <h3 id="pattern-2-docker-swarm-production-cluster" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#pattern-2-docker-swarm-production-cluster">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Pattern 2: Docker Swarm Production Cluster</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#pattern-2-docker-swarm-production-cluster" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<p>For organizations requiring container orchestration without Kubernetes complexity, Docker Swarm provides built-in clustering capabilities.</p>
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># docker-swarm-stack.yml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-master</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
      <span class="token key atrule">placement</span><span class="token punctuation">:</span>
        <span class="token key atrule">constraints</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> node.labels.elasticsearch.role == master
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 4G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 2G
      <span class="token key atrule">restart_policy</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> on<span class="token punctuation">-</span>failure
        <span class="token key atrule">delay</span><span class="token punctuation">:</span> 30s
        <span class="token key atrule">max_attempts</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.roles=master
      <span class="token punctuation">-</span> cluster.name=swarm<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=elasticsearch<span class="token punctuation">-</span>master
      <span class="token punctuation">-</span> discovery.seed_hosts=elasticsearch<span class="token punctuation">-</span>master<span class="token punctuation">,</span>elasticsearch<span class="token punctuation">-</span>data
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms2g -Xmx2g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>master<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>network
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token key atrule">elasticsearch-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
      <span class="token key atrule">placement</span><span class="token punctuation">:</span>
        <span class="token key atrule">constraints</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> node.labels.elasticsearch.role == data
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 16G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 8G
      <span class="token key atrule">restart_policy</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> on<span class="token punctuation">-</span>failure
        <span class="token key atrule">delay</span><span class="token punctuation">:</span> 30s
        <span class="token key atrule">max_attempts</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.roles=data<span class="token punctuation">,</span>ingest
      <span class="token punctuation">-</span> cluster.name=swarm<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=elasticsearch<span class="token punctuation">-</span>master
      <span class="token punctuation">-</span> discovery.seed_hosts=elasticsearch<span class="token punctuation">-</span>master<span class="token punctuation">,</span>elasticsearch<span class="token punctuation">-</span>data
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms8g -Xmx8g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>data<span class="token punctuation">-</span>volume<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>network
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token key atrule">elasticsearch-coordinating</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
      <span class="token key atrule">placement</span><span class="token punctuation">:</span>
        <span class="token key atrule">constraints</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> node.labels.elasticsearch.role == coordinating
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 8G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 4G
      <span class="token key atrule">restart_policy</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> on<span class="token punctuation">-</span>failure
        <span class="token key atrule">delay</span><span class="token punctuation">:</span> 30s
        <span class="token key atrule">max_attempts</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.roles=""
      <span class="token punctuation">-</span> cluster.name=swarm<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> cluster.initial_master_nodes=elasticsearch<span class="token punctuation">-</span>master
      <span class="token punctuation">-</span> discovery.seed_hosts=elasticsearch<span class="token punctuation">-</span>master<span class="token punctuation">,</span>elasticsearch<span class="token punctuation">-</span>data
      <span class="token punctuation">-</span> bootstrap.memory_lock=true
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms4g -Xmx4g"</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>network
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9200:9200"</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"curl -f https://localhost:9200/_cluster/health || exit 1"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-master-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">elasticsearch-data-volume</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">elasticsearch-certs</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-network</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> overlay
    <span class="token key atrule">attachable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre>
</div>
<hr>

        <h2 id="container-security-and-hardening" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#container-security-and-hardening">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Container Security and Hardening</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#container-security-and-hardening" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="ssl-tls-certificate-management" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#ssltls-certificate-management">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>SSL/TLS Certificate Management</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#ssl-tls-certificate-management" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># setup-certificates.sh - Generate production certificates</span>

<span class="token comment"># Create certificate authority</span>
<span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-v</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/certs:/usr/share/elasticsearch/config/certs <span class="token punctuation">\</span>
  docker.elastic.co/elasticsearch/elasticsearch:9.1.5 <span class="token punctuation">\</span>
  bin/elasticsearch-certutil ca <span class="token parameter variable">--out</span> config/certs/elastic-stack-ca.p12 <span class="token parameter variable">--pass</span> <span class="token string">""</span>

<span class="token comment"># Generate node certificates</span>
<span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-v</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/certs:/usr/share/elasticsearch/config/certs <span class="token punctuation">\</span>
  docker.elastic.co/elasticsearch/elasticsearch:9.1.5 <span class="token punctuation">\</span>
  bin/elasticsearch-certutil cert <span class="token punctuation">\</span>
  <span class="token parameter variable">--ca</span> config/certs/elastic-stack-ca.p12 <span class="token punctuation">\</span>
  --ca-pass <span class="token string">""</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--out</span> config/certs/elastic-certificates.p12 <span class="token punctuation">\</span>
  <span class="token parameter variable">--pass</span> <span class="token string">""</span>

<span class="token comment"># Generate HTTP certificates for external access</span>
<span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-v</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/certs:/usr/share/elasticsearch/config/certs <span class="token punctuation">\</span>
  docker.elastic.co/elasticsearch/elasticsearch:9.1.5 <span class="token punctuation">\</span>
  bin/elasticsearch-certutil http

<span class="token comment"># Set proper permissions</span>
<span class="token function">chmod</span> <span class="token number">644</span> certs/*.p12
<span class="token function">chmod</span> <span class="token number">644</span> certs/*.crt
<span class="token function">chmod</span> <span class="token number">600</span> certs/*.key
</code></pre>
</div>

        <h3 id="production-elasticsearch-configuration" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#production-elasticsearch-configuration">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Production Elasticsearch Configuration</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#production-elasticsearch-configuration" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># elasticsearch.yml</span>
<span class="token comment"># Network settings</span>
<span class="token key atrule">network.host</span><span class="token punctuation">:</span> 0.0.0.0
<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9200</span>
<span class="token key atrule">transport.port</span><span class="token punctuation">:</span> <span class="token number">9300</span>

<span class="token comment"># Security settings</span>
<span class="token key atrule">xpack.security.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">xpack.security.transport.ssl.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">xpack.security.transport.ssl.verification_mode</span><span class="token punctuation">:</span> certificate
<span class="token key atrule">xpack.security.transport.ssl.client_authentication</span><span class="token punctuation">:</span> required
<span class="token key atrule">xpack.security.transport.ssl.keystore.path</span><span class="token punctuation">:</span> certs/elastic<span class="token punctuation">-</span>certificates.p12
<span class="token key atrule">xpack.security.transport.ssl.truststore.path</span><span class="token punctuation">:</span> certs/elastic<span class="token punctuation">-</span>certificates.p12

<span class="token key atrule">xpack.security.http.ssl.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">xpack.security.http.ssl.keystore.path</span><span class="token punctuation">:</span> certs/elastic<span class="token punctuation">-</span>certificates.p12

<span class="token comment"># Performance optimizations</span>
<span class="token key atrule">indices.memory.index_buffer_size</span><span class="token punctuation">:</span> 20%
<span class="token key atrule">indices.fielddata.cache.size</span><span class="token punctuation">:</span> 30%
<span class="token key atrule">indices.queries.cache.size</span><span class="token punctuation">:</span> 10%
<span class="token key atrule">bootstrap.memory_lock</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Cluster settings</span>
<span class="token key atrule">cluster.routing.allocation.disk.threshold.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">cluster.routing.allocation.disk.watermark.low</span><span class="token punctuation">:</span> 85%
<span class="token key atrule">cluster.routing.allocation.disk.watermark.high</span><span class="token punctuation">:</span> 90%
<span class="token key atrule">cluster.routing.allocation.disk.watermark.flood_stage</span><span class="token punctuation">:</span> 95%

<span class="token comment"># Monitoring</span>
<span class="token key atrule">xpack.monitoring.collection.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">xpack.monitoring.elasticsearch.collection.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Logging</span>
<span class="token key atrule">logger.root</span><span class="token punctuation">:</span> INFO
<span class="token key atrule">logger.org.elasticsearch.transport</span><span class="token punctuation">:</span> WARN
<span class="token key atrule">logger.org.elasticsearch.discovery</span><span class="token punctuation">:</span> WARN

<span class="token comment"># Index management</span>
<span class="token key atrule">action.auto_create_index</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
<span class="token key atrule">action.destructive_requires_name</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre>
</div>

        <h3 id="container-resource-optimization" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#container-resource-optimization">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Container Resource Optimization</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#container-resource-optimization" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># .env file for production environment variables</span>
COMPOSE_PROJECT_NAME=elasticsearch<span class="token punctuation">-</span>prod

<span class="token comment"># JVM Heap sizes (should be 50% of container memory)</span>
ES_MASTER_HEAP=2g
ES_DATA_HEAP=8g
ES_COORDINATING_HEAP=4g

<span class="token comment"># Security passwords (use secrets management in production)</span>
ELASTIC_PASSWORD=your_secure_password_here
KIBANA_PASSWORD=your_kibana_password_here

<span class="token comment"># Performance tuning</span>
ES_MAX_MAP_COUNT=262144
ES_ULIMIT_MEMLOCK=<span class="token punctuation">-</span><span class="token number">1</span>

<span class="token comment"># Network configuration</span>
ELASTIC_NETWORK_SUBNET=172.20.0.0/16
</code></pre>
</div>
<hr>

        <h2 id="persistent-storage-strategies" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#persistent-storage-strategies">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Persistent Storage Strategies</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#persistent-storage-strategies" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="local-volume-management" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#local-volume-management">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Local Volume Management</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#local-volume-management" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># volume-management.sh - Production volume setup</span>

<span class="token comment"># Create optimized volumes with specific mount options</span>
<span class="token function">docker</span> volume create <span class="token punctuation">\</span>
  <span class="token parameter variable">--driver</span> <span class="token builtin class-name">local</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>ext4 <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">device</span><span class="token operator">=</span>/dev/nvme1n1 <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">o</span><span class="token operator">=</span>rw,noatime,nodiratime <span class="token punctuation">\</span>
  elasticsearch-data-1

<span class="token function">docker</span> volume create <span class="token punctuation">\</span>
  <span class="token parameter variable">--driver</span> <span class="token builtin class-name">local</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>ext4 <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">device</span><span class="token operator">=</span>/dev/nvme2n1 <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">o</span><span class="token operator">=</span>rw,noatime,nodiratime <span class="token punctuation">\</span>
  elasticsearch-data-2

<span class="token comment"># Create backup volumes on separate storage</span>
<span class="token function">docker</span> volume create <span class="token punctuation">\</span>
  <span class="token parameter variable">--driver</span> <span class="token builtin class-name">local</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>ext4 <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">device</span><span class="token operator">=</span>/dev/sdb1 <span class="token punctuation">\</span>
  <span class="token parameter variable">--opt</span> <span class="token assign-left variable">o</span><span class="token operator">=</span>rw,noatime <span class="token punctuation">\</span>
  elasticsearch-backup
</code></pre>
</div>

        <h3 id="network-attached-storage-nas-integration" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#network-attached-storage-nas-integration">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Network Attached Storage (NAS) Integration</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#network-attached-storage-nas-integration" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># docker-compose.nas.yml - Using NFS for shared storage</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-shared-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
    <span class="token key atrule">driver_opts</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> nfs
      <span class="token key atrule">o</span><span class="token punctuation">:</span> addr=10.0.0.100<span class="token punctuation">,</span>rw<span class="token punctuation">,</span>nfsvers=4<span class="token punctuation">,</span>async
      <span class="token key atrule">device</span><span class="token punctuation">:</span> <span class="token punctuation">:</span>/mnt/elasticsearch/data

  <span class="token key atrule">elasticsearch-backup</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
    <span class="token key atrule">driver_opts</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> nfs
      <span class="token key atrule">o</span><span class="token punctuation">:</span> addr=10.0.0.100<span class="token punctuation">,</span>rw<span class="token punctuation">,</span>nfsvers=4<span class="token punctuation">,</span>async
      <span class="token key atrule">device</span><span class="token punctuation">:</span> <span class="token punctuation">:</span>/mnt/elasticsearch/backup
</code></pre>
</div>

        <h3 id="cloud-storage-integration" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#cloud-storage-integration">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Cloud Storage Integration</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#cloud-storage-integration" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># Cloud storage driver example (AWS EFS)</span>
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-efs-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
    <span class="token key atrule">driver_opts</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> nfs4
      <span class="token key atrule">o</span><span class="token punctuation">:</span> addr=fs<span class="token punctuation">-</span>12345678.efs.us<span class="token punctuation">-</span>west<span class="token punctuation">-</span>2.amazonaws.com<span class="token punctuation">,</span>rsize=1048576<span class="token punctuation">,</span>wsize=1048576<span class="token punctuation">,</span>hard<span class="token punctuation">,</span>intr<span class="token punctuation">,</span>timeo=600
      <span class="token key atrule">device</span><span class="token punctuation">:</span> <span class="token punctuation">:</span>/
</code></pre>
</div>
<hr>

        <h2 id="performance-monitoring-and-optimization" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#performance-monitoring-and-optimization">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Performance Monitoring and Optimization</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#performance-monitoring-and-optimization" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="container-metrics-collection" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#container-metrics-collection">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Container Metrics Collection</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#container-metrics-collection" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># monitoring-stack.yml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">prometheus</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> prom/prometheus<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> prometheus
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9090:9090"</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./prometheus.yml<span class="token punctuation">:</span>/etc/prometheus/prometheus.yml
      <span class="token punctuation">-</span> prometheus<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/prometheus
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'--config.file=/etc/prometheus/prometheus.yml'</span>
      <span class="token punctuation">-</span> <span class="token string">'--storage.tsdb.path=/prometheus'</span>
      <span class="token punctuation">-</span> <span class="token string">'--web.console.libraries=/etc/prometheus/console_libraries'</span>
      <span class="token punctuation">-</span> <span class="token string">'--web.console.templates=/etc/prometheus/consoles'</span>
      <span class="token punctuation">-</span> <span class="token string">'--storage.tsdb.retention.time=30d'</span>
      <span class="token punctuation">-</span> <span class="token string">'--web.enable-lifecycle'</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitoring
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network

  <span class="token key atrule">grafana</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/grafana<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> grafana
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"3000:3000"</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> GF_SECURITY_ADMIN_PASSWORD=admin123
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> grafana<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/grafana
      <span class="token punctuation">-</span> ./grafana/dashboards<span class="token punctuation">:</span>/etc/grafana/provisioning/dashboards
      <span class="token punctuation">-</span> ./grafana/datasources<span class="token punctuation">:</span>/etc/grafana/provisioning/datasources
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitoring

  <span class="token key atrule">node-exporter</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> prom/node<span class="token punctuation">-</span>exporter<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>exporter
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9100:9100"</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /proc<span class="token punctuation">:</span>/host/proc<span class="token punctuation">:</span>ro
      <span class="token punctuation">-</span> /sys<span class="token punctuation">:</span>/host/sys<span class="token punctuation">:</span>ro
      <span class="token punctuation">-</span> /<span class="token punctuation">:</span>/rootfs<span class="token punctuation">:</span>ro
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'--path.procfs=/host/proc'</span>
      <span class="token punctuation">-</span> <span class="token string">'--path.rootfs=/rootfs'</span>
      <span class="token punctuation">-</span> <span class="token string">'--path.sysfs=/host/sys'</span>
      <span class="token punctuation">-</span> <span class="token string">'--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)'</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitoring

  <span class="token key atrule">elasticsearch-exporter</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> prometheuscommunity/elasticsearch<span class="token punctuation">-</span>exporter<span class="token punctuation">:</span>latest
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> elasticsearch<span class="token punctuation">-</span>exporter
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9114:9114"</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ES_URI=https<span class="token punctuation">:</span>//es<span class="token punctuation">-</span>coordinating<span class="token punctuation">:</span><span class="token number">9200</span>
      <span class="token punctuation">-</span> ES_USERNAME=monitoring_user
      <span class="token punctuation">-</span> ES_PASSWORD=$<span class="token punctuation">{</span>MONITORING_PASSWORD<span class="token punctuation">}</span>
      <span class="token punctuation">-</span> ES_SSL_SKIP_VERIFY=true
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> monitoring
      <span class="token punctuation">-</span> elastic<span class="token punctuation">-</span>network

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">prometheus-data</span><span class="token punctuation">:</span>
  <span class="token key atrule">grafana-data</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">monitoring</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
</code></pre>
</div>

        <h3 id="performance-tuning-configuration" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#performance-tuning-configuration">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Performance Tuning Configuration</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#performance-tuning-configuration" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># High-performance elasticsearch configuration</span>
<span class="token comment"># elasticsearch-performance.yml</span>

<span class="token comment"># JVM settings for data nodes</span>
<span class="token key atrule">ES_JAVA_OPTS</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
  -Xms8g -Xmx8g
  -XX:+UseG1GC
  -XX:G1HeapRegionSize=16m
  -XX:+UnlockExperimentalVMOptions
  -XX:+UseTransparentHugePages
  -XX:+AlwaysPreTouch
  -Djava.io.tmpdir=/tmp
  -Dlog4j2.formatMsgNoLookups=true</span>

<span class="token comment"># Operating system settings</span>
<span class="token key atrule">ulimits</span><span class="token punctuation">:</span>
  <span class="token key atrule">memlock</span><span class="token punctuation">:</span>
    <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">-1</span>
    <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">-1</span>
  <span class="token key atrule">nofile</span><span class="token punctuation">:</span>
    <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">65536</span>
    <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">65536</span>
  <span class="token key atrule">nproc</span><span class="token punctuation">:</span>
    <span class="token key atrule">soft</span><span class="token punctuation">:</span> <span class="token number">8192</span>
    <span class="token key atrule">hard</span><span class="token punctuation">:</span> <span class="token number">8192</span>

<span class="token comment"># Kernel parameter optimization</span>
<span class="token key atrule">sysctls</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> vm.max_map_count=262144
  <span class="token punctuation">-</span> vm.swappiness=1
  <span class="token punctuation">-</span> net.core.somaxconn=32768
  <span class="token punctuation">-</span> net.ipv4.tcp_keepalive_time=120
</code></pre>
</div>
<hr>

        <h2 id="backup-and-disaster-recovery" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#backup-and-disaster-recovery">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Backup and Disaster Recovery</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#backup-and-disaster-recovery" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="automated-backup-strategy" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#automated-backup-strategy">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Automated Backup Strategy</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#automated-backup-strategy" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># elasticsearch-backup.sh - Production backup automation</span>

<span class="token assign-left variable">CLUSTER_URL</span><span class="token operator">=</span><span class="token string">"https://es-coordinating:9200"</span>
<span class="token assign-left variable">BACKUP_REPO</span><span class="token operator">=</span><span class="token string">"docker-backup-repo"</span>
<span class="token assign-left variable">SNAPSHOT_NAME</span><span class="token operator">=</span><span class="token string">"daily-snapshot-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y%m%d-%H%M%S<span class="token variable">)</span></span>"</span>
<span class="token assign-left variable">S3_BUCKET</span><span class="token operator">=</span><span class="token string">"your-elasticsearch-backups"</span>
<span class="token assign-left variable">RETENTION_DAYS</span><span class="token operator">=</span><span class="token number">30</span>

<span class="token comment"># Register backup repository</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_snapshot/<span class="token variable">${BACKUP_REPO}</span>"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-k</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{
    "type": "fs",
    "settings": {
      "location": "/usr/share/elasticsearch/backup",
      "compress": true,
      "max_snapshot_bytes_per_sec": "50mb",
      "max_restore_bytes_per_sec": "50mb"
    }
  }'</span>

<span class="token comment"># Create snapshot</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_snapshot/<span class="token variable">${BACKUP_REPO}</span>/<span class="token variable">${SNAPSHOT_NAME}</span>"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-k</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{
    "indices": "*",
    "ignore_unavailable": true,
    "include_global_state": false,
    "metadata": {
      "taken_by": "automated-backup",
      "taken_because": "daily backup"
    }
  }'</span>

<span class="token comment"># Wait for snapshot completion</span>
<span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token assign-left variable">STATUS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-X</span> GET <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_snapshot/<span class="token variable">${BACKUP_REPO}</span>/<span class="token variable">${SNAPSHOT_NAME}</span>"</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token parameter variable">-k</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.snapshots[0].state'</span><span class="token variable">)</span></span>
  
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$STATUS</span>"</span> <span class="token operator">=</span> <span class="token string">"SUCCESS"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Snapshot completed successfully"</span>
    <span class="token builtin class-name">break</span>
  <span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$STATUS</span>"</span> <span class="token operator">=</span> <span class="token string">"FAILED"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Snapshot failed"</span>
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
  <span class="token keyword">fi</span>
  
  <span class="token function">sleep</span> <span class="token number">30</span>
<span class="token keyword">done</span>

<span class="token comment"># Upload to S3 (optional)</span>
aws s3 <span class="token function">sync</span> /var/lib/docker/volumes/elasticsearch-backup/_data/ <span class="token punctuation">\</span>
  s3://<span class="token variable">${S3_BUCKET}</span>/snapshots/<span class="token variable">${SNAPSHOT_NAME}</span>/

<span class="token comment"># Cleanup old snapshots</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> DELETE <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_snapshot/<span class="token variable">${BACKUP_REPO}</span>/*"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token parameter variable">-k</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{
    "max_age": "'</span><span class="token variable">${RETENTION_DAYS}</span><span class="token string">'d"
  }'</span>
</code></pre>
</div>

        <h3 id="disaster-recovery-procedures" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#disaster-recovery-procedures">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Disaster Recovery Procedures</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#disaster-recovery-procedures" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># elasticsearch-restore.sh - Disaster recovery script</span>

<span class="token assign-left variable">CLUSTER_URL</span><span class="token operator">=</span><span class="token string">"https://es-coordinating:9200"</span>
<span class="token assign-left variable">BACKUP_REPO</span><span class="token operator">=</span><span class="token string">"docker-backup-repo"</span>
<span class="token assign-left variable">SNAPSHOT_NAME</span><span class="token operator">=</span><span class="token variable">$1</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$SNAPSHOT_NAME</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Usage: <span class="token variable">$0</span> &lt;snapshot_name&gt;"</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Available snapshots:"</span>
  <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-X</span> GET <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_snapshot/<span class="token variable">${BACKUP_REPO}</span>/_all"</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token parameter variable">-k</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.snapshots[].snapshot'</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>

<span class="token comment"># Close indices before restore</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_all/_close"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token parameter variable">-k</span>

<span class="token comment"># Restore snapshot</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_snapshot/<span class="token variable">${BACKUP_REPO}</span>/<span class="token variable">${SNAPSHOT_NAME}</span>/_restore"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-k</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{
    "indices": "*",
    "ignore_unavailable": true,
    "include_global_state": false,
    "rename_pattern": "(.+)",
    "rename_replacement": "restored_$1",
    "include_aliases": false
  }'</span>

<span class="token comment"># Monitor restore progress</span>
<span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token assign-left variable">RECOVERY_STATUS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-X</span> GET <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_recovery"</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token parameter variable">-k</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.[] | select(.stage != "DONE") | length'</span><span class="token variable">)</span></span>
  
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$RECOVERY_STATUS</span>"</span> <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Restore completed successfully"</span>
    <span class="token builtin class-name">break</span>
  <span class="token keyword">fi</span>
  
  <span class="token builtin class-name">echo</span> <span class="token string">"Restore in progress..."</span>
  <span class="token function">sleep</span> <span class="token number">30</span>
<span class="token keyword">done</span>

<span class="token comment"># Open restored indices</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/restored_*/_open"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token parameter variable">-k</span>

<span class="token builtin class-name">echo</span> <span class="token string">"Disaster recovery completed"</span>
</code></pre>
</div>
<hr>

        <h2 id="cost-analysis-docker-vs-alternatives" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#cost-analysis-docker-vs-alternatives">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Cost Analysis: Docker vs Alternatives</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#cost-analysis-docker-vs-alternatives" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="infrastructure-cost-comparison" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#infrastructure-cost-comparison">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Infrastructure Cost Comparison</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#infrastructure-cost-comparison" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="table-wrapper"><table class="highlight tab-size js-file-line-container">
<thead>
<tr>
<th><strong>Component</strong></th>
<th><strong>Docker Compose</strong></th>
<th><strong>Docker Swarm</strong></th>
<th><strong>Kubernetes</strong></th>
<th><strong>Elastic Cloud</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Setup Time</strong></td>
<td>2-4 hours</td>
<td>4-8 hours</td>
<td>8-16 hours</td>
<td>30 minutes</td>
</tr>
<tr>
<td><strong>Learning Curve</strong></td>
<td>Low</td>
<td>Medium</td>
<td>High</td>
<td>Very Low</td>
</tr>
<tr>
<td><strong>Operational Overhead</strong></td>
<td>Low</td>
<td>Medium</td>
<td>High</td>
<td>None</td>
</tr>
<tr>
<td><strong>Monthly Cost (10TB)</strong></td>
<td>$800-1,200</td>
<td>$1,000-1,500</td>
<td>$1,200-2,000</td>
<td>$3,000-5,000</td>
</tr>
<tr>
<td><strong>Scaling Complexity</strong></td>
<td>Manual</td>
<td>Semi-automated</td>
<td>Automated</td>
<td>Fully automated</td>
</tr>
<tr>
<td><strong>Multi-region Support</strong></td>
<td>Manual setup</td>
<td>Complex</td>
<td>Native</td>
<td>Built-in</td>
</tr>
</tbody></table></div>

        <h3 id="total-cost-of-ownership-3-year-analysis" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#total-cost-of-ownership-3-year-analysis">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Total Cost of Ownership (3-Year Analysis)</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#total-cost-of-ownership-3-year-analysis" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-python notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-python" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-python" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># cost-calculator.py - Docker deployment TCO analysis</span>

<span class="token keyword">class</span> <span class="token class-name">DockerElasticsearchTCO</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data_size_tb<span class="token punctuation">,</span> queries_per_second<span class="token punctuation">,</span> team_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>data_size_tb <span class="token operator">=</span> data_size_tb
        self<span class="token punctuation">.</span>queries_per_second <span class="token operator">=</span> queries_per_second
        self<span class="token punctuation">.</span>team_size <span class="token operator">=</span> team_size
    
    <span class="token keyword">def</span> <span class="token function">calculate_infrastructure_costs</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Calculate infrastructure costs for Docker deployment"""</span>
        <span class="token comment"># Node sizing based on data volume</span>
        data_nodes <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>data_size_tb <span class="token operator">//</span> <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># 5TB per data node</span>
        master_nodes <span class="token operator">=</span> <span class="token number">3</span>  <span class="token comment"># Always 3 for HA</span>
        coordinating_nodes <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>queries_per_second <span class="token operator">//</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        
        <span class="token comment"># Server costs (AWS equivalent)</span>
        data_node_cost <span class="token operator">=</span> <span class="token number">150</span>  <span class="token comment"># r5.xlarge equivalent per month</span>
        master_node_cost <span class="token operator">=</span> <span class="token number">75</span>  <span class="token comment"># r5.large equivalent per month</span>
        coord_node_cost <span class="token operator">=</span> <span class="token number">100</span>  <span class="token comment"># r5.large with more CPU per month</span>
        
        monthly_compute <span class="token operator">=</span> <span class="token punctuation">(</span>
            data_nodes <span class="token operator">*</span> data_node_cost <span class="token operator">+</span>
            master_nodes <span class="token operator">*</span> master_node_cost <span class="token operator">+</span>
            coordinating_nodes <span class="token operator">*</span> coord_node_cost
        <span class="token punctuation">)</span>
        
        <span class="token comment"># Storage costs (SSD)</span>
        storage_cost_per_tb <span class="token operator">=</span> <span class="token number">45</span>  <span class="token comment"># NVMe SSD cost per month</span>
        monthly_storage <span class="token operator">=</span> self<span class="token punctuation">.</span>data_size_tb <span class="token operator">*</span> <span class="token number">1.3</span> <span class="token operator">*</span> storage_cost_per_tb  <span class="token comment"># 30% overhead</span>
        
        <span class="token comment"># Network costs</span>
        monthly_network <span class="token operator">=</span> <span class="token number">50</span> <span class="token operator">+</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>queries_per_second <span class="token operator">*</span> <span class="token number">0.01</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> monthly_compute <span class="token operator">+</span> monthly_storage <span class="token operator">+</span> monthly_network
    
    <span class="token keyword">def</span> <span class="token function">calculate_operational_costs</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Calculate operational overhead costs"""</span>
        <span class="token comment"># DevOps engineer time allocation</span>
        monthly_devops_hours <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">+</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>data_size_tb <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span>
        devops_hourly_rate <span class="token operator">=</span> <span class="token number">75</span>
        
        <span class="token comment"># Monitoring and tooling</span>
        monthly_tooling <span class="token operator">=</span> <span class="token number">200</span>
        
        <span class="token comment"># Training and certification</span>
        annual_training <span class="token operator">=</span> self<span class="token punctuation">.</span>team_size <span class="token operator">*</span> <span class="token number">2000</span>
        monthly_training <span class="token operator">=</span> annual_training <span class="token operator">/</span> <span class="token number">12</span>
        
        <span class="token keyword">return</span> <span class="token punctuation">(</span>monthly_devops_hours <span class="token operator">*</span> devops_hourly_rate<span class="token punctuation">)</span> <span class="token operator">+</span> monthly_tooling <span class="token operator">+</span> monthly_training
    
    <span class="token keyword">def</span> <span class="token function">calculate_total_tco</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> years<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Calculate total 3-year TCO"""</span>
        monthly_infrastructure <span class="token operator">=</span> self<span class="token punctuation">.</span>calculate_infrastructure_costs<span class="token punctuation">(</span><span class="token punctuation">)</span>
        monthly_operational <span class="token operator">=</span> self<span class="token punctuation">.</span>calculate_operational_costs<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># One-time setup costs</span>
        setup_cost <span class="token operator">=</span> <span class="token number">5000</span> <span class="token operator">+</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>team_size <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>  <span class="token comment"># Initial setup and training</span>
        
        <span class="token comment"># Annual growth factors</span>
        growth_factor <span class="token operator">=</span> <span class="token number">1.2</span>  <span class="token comment"># 20% annual data growth</span>
        
        total_cost <span class="token operator">=</span> setup_cost
        <span class="token keyword">for</span> year <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>years<span class="token punctuation">)</span><span class="token punctuation">:</span>
            yearly_factor <span class="token operator">=</span> growth_factor <span class="token operator">**</span> year
            yearly_infrastructure <span class="token operator">=</span> monthly_infrastructure <span class="token operator">*</span> yearly_factor <span class="token operator">*</span> <span class="token number">12</span>
            yearly_operational <span class="token operator">=</span> monthly_operational <span class="token operator">*</span> <span class="token number">12</span>
            total_cost <span class="token operator">+=</span> yearly_infrastructure <span class="token operator">+</span> yearly_operational
        
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token string">'total_3_year'</span><span class="token punctuation">:</span> total_cost<span class="token punctuation">,</span>
            <span class="token string">'monthly_average'</span><span class="token punctuation">:</span> total_cost <span class="token operator">/</span> <span class="token punctuation">(</span>years <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">'cost_per_tb_monthly'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>total_cost <span class="token operator">/</span> <span class="token punctuation">(</span>years <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> self<span class="token punctuation">.</span>data_size_tb
        <span class="token punctuation">}</span>

<span class="token comment"># Example calculation for medium deployment</span>
calculator <span class="token operator">=</span> DockerElasticsearchTCO<span class="token punctuation">(</span>data_size_tb<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> queries_per_second<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> team_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
costs <span class="token operator">=</span> calculator<span class="token punctuation">.</span>calculate_total_tco<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"3-Year TCO: $</span><span class="token interpolation"><span class="token punctuation">{</span>costs<span class="token punctuation">[</span><span class="token string">'total_3_year'</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Monthly Average: $</span><span class="token interpolation"><span class="token punctuation">{</span>costs<span class="token punctuation">[</span><span class="token string">'monthly_average'</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Cost per TB per Month: $</span><span class="token interpolation"><span class="token punctuation">{</span>costs<span class="token punctuation">[</span><span class="token string">'cost_per_tb_monthly'</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token format-spec">,.2f</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
</div>
<p><strong>Sample Output:</strong></p>
<div class="highlight notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-none" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-none" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;">3-Year TCO: $89,400.00
Monthly Average: $2,483.33
Cost per TB per Month: $248.33
</code></pre>
</div>
<hr>

        <h2 id="migration-strategies" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#migration-strategies">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Migration Strategies</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#migration-strategies" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="from-single-node-to-multi-node-cluster" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#from-single-node-to-multi-node-cluster">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>From Single Node to Multi-Node Cluster</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#from-single-node-to-multi-node-cluster" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># migrate-to-cluster.sh - Migration from single node to clustered Docker</span>

<span class="token comment"># Step 1: Backup existing data</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> elasticsearch-single <span class="token punctuation">\</span>
  <span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">"localhost:9200/_snapshot/migration-backup"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{
    "type": "fs",
    "settings": {
      "location": "/usr/share/elasticsearch/backup"
    }
  }'</span>

<span class="token comment"># Create snapshot</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> elasticsearch-single <span class="token punctuation">\</span>
  <span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">"localhost:9200/_snapshot/migration-backup/pre-cluster-migration"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{
    "indices": "*",
    "ignore_unavailable": true,
    "include_global_state": true
  }'</span>

<span class="token comment"># Step 2: Export configuration</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> elasticsearch-single <span class="token function">cat</span> /usr/share/elasticsearch/config/elasticsearch.yml <span class="token operator">&gt;</span> old-config.yml

<span class="token comment"># Step 3: Deploy new cluster</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> docker-compose.production.yml up <span class="token parameter variable">-d</span>

<span class="token comment"># Step 4: Wait for cluster to be ready</span>
<span class="token keyword">until</span> <span class="token function">curl</span> <span class="token parameter variable">-f</span> https://localhost:9200/_cluster/health<span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">"Waiting for cluster..."</span>
  <span class="token function">sleep</span> <span class="token number">10</span>
<span class="token keyword">done</span>

<span class="token comment"># Step 5: Restore data to new cluster</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">"https://localhost:9200/_snapshot/migration-backup/pre-cluster-migration/_restore"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-k</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{
    "indices": "*",
    "ignore_unavailable": true
  }'</span>

<span class="token builtin class-name">echo</span> <span class="token string">"Migration completed successfully"</span>
</code></pre>
</div>

        <h3 id="from-vm-based-to-container-based-deployment" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#from-vm-based-to-container-based-deployment">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>From VM-based to Container-based Deployment</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#from-vm-based-to-container-based-deployment" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># migration-compose.yml - Temporary migration setup</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment"># New containerized cluster</span>
  <span class="token key atrule">elasticsearch-new</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> cluster.name=migration<span class="token punctuation">-</span>cluster
      <span class="token punctuation">-</span> node.name=migration<span class="token punctuation">-</span>node
      <span class="token punctuation">-</span> discovery.type=single<span class="token punctuation">-</span>node
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms4g -Xmx4g"</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> migration<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> ./vm<span class="token punctuation">-</span>backup<span class="token punctuation">:</span>/usr/share/elasticsearch/vm<span class="token punctuation">-</span>backup<span class="token punctuation">:</span>ro
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9201:9200"</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> migration<span class="token punctuation">-</span>network

  <span class="token comment"># Data migration utility</span>
  <span class="token key atrule">elasticsearch-migration</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>new
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./migration<span class="token punctuation">-</span>scripts<span class="token punctuation">:</span>/scripts
      <span class="token punctuation">-</span> ./vm<span class="token punctuation">-</span>backup<span class="token punctuation">:</span>/vm<span class="token punctuation">-</span>backup<span class="token punctuation">:</span>ro
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"/scripts/migrate-from-vm.sh"</span><span class="token punctuation">]</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> migration<span class="token punctuation">-</span>network

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">migration-data</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">migration-network</span><span class="token punctuation">:</span>
</code></pre>
</div>
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># migrate-from-vm.sh - VM to container migration script</span>

<span class="token assign-left variable">VM_CLUSTER_URL</span><span class="token operator">=</span><span class="token string">"http://old-vm-server:9200"</span>
<span class="token assign-left variable">NEW_CLUSTER_URL</span><span class="token operator">=</span><span class="token string">"http://elasticsearch-new:9200"</span>

<span class="token comment"># Copy data using reindex API</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">"<span class="token variable">${NEW_CLUSTER_URL}</span>/_reindex"</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{
    "source": {
      "remote": {
        "host": "'</span><span class="token variable">${VM_CLUSTER_URL}</span><span class="token string">'"
      },
      "index": "*"
    },
    "dest": {
      "index": "migrated-data"
    }
  }'</span>

<span class="token comment"># Alternative: Use Elasticsearch dump tool</span>
elasticdump <span class="token punctuation">\</span>
  <span class="token parameter variable">--input</span><span class="token operator">=</span><span class="token variable">${VM_CLUSTER_URL}</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--output</span><span class="token operator">=</span><span class="token variable">${NEW_CLUSTER_URL}</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">--type</span><span class="token operator">=</span>data <span class="token punctuation">\</span>
  <span class="token parameter variable">--all</span><span class="token operator">=</span>true
</code></pre>
</div>
<hr>

        <h2 id="scaling-and-auto-scaling-patterns" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#scaling-and-auto-scaling-patterns">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Scaling and Auto-scaling Patterns</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#scaling-and-auto-scaling-patterns" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="manual-scaling-procedures" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#manual-scaling-procedures">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Manual Scaling Procedures</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#manual-scaling-procedures" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># scale-cluster.sh - Manual scaling operations</span>

<span class="token assign-left variable">ACTION</span><span class="token operator">=</span><span class="token variable">$1</span>  <span class="token comment"># scale-up or scale-down</span>
<span class="token assign-left variable">NODE_TYPE</span><span class="token operator">=</span><span class="token variable">$2</span>  <span class="token comment"># master, data, or coordinating</span>
<span class="token assign-left variable">COUNT</span><span class="token operator">=</span><span class="token variable">$3</span>

<span class="token keyword">case</span> <span class="token variable">$ACTION</span> <span class="token keyword">in</span>
  <span class="token string">"scale-up"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$NODE_TYPE</span>"</span> <span class="token operator">=</span> <span class="token string">"data"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">1</span> $COUNT<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token assign-left variable">NODE_NAME</span><span class="token operator">=</span><span class="token string">"es-data-<span class="token variable"><span class="token variable">$((</span>$<span class="token punctuation">(</span>docker ps <span class="token operator">--</span>filter name<span class="token operator">=</span>es<span class="token operator">-</span>data<span class="token operator">-</span> <span class="token operator">--</span>format "{{.Names}}" <span class="token operator">|</span> wc <span class="token operator">-</span>l<span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token variable">))</span></span>"</span>
        
        <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">--name</span> <span class="token variable">$NODE_NAME</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">--network</span> elasticsearch-production_elastic-network <span class="token punctuation">\</span>
          <span class="token parameter variable">-e</span> <span class="token string">"node.name=<span class="token variable">$NODE_NAME</span>"</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-e</span> <span class="token string">"node.roles=data,ingest"</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-e</span> <span class="token string">"cluster.name=production-cluster"</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-e</span> <span class="token string">"discovery.seed_hosts=es-master-1,es-master-2,es-master-3"</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-e</span> <span class="token string">"ES_JAVA_OPTS=-Xms8g -Xmx8g"</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-v</span> <span class="token string">"<span class="token variable">${NODE_NAME}</span>-data:/usr/share/elasticsearch/data"</span> <span class="token punctuation">\</span>
          docker.elastic.co/elasticsearch/elasticsearch:9.1.5
        
        <span class="token builtin class-name">echo</span> <span class="token string">"Started <span class="token variable">$NODE_NAME</span>"</span>
      <span class="token keyword">done</span>
    <span class="token keyword">fi</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
    
  <span class="token string">"scale-down"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$NODE_TYPE</span>"</span> <span class="token operator">=</span> <span class="token string">"data"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token comment"># Safely remove data nodes</span>
      <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">1</span> $COUNT<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token assign-left variable">NODE_NAME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">--filter</span> <span class="token assign-left variable">name</span><span class="token operator">=</span>es-data- <span class="token parameter variable">--format</span> <span class="token string">"{{.Names}}"</span> <span class="token operator">|</span> <span class="token function">tail</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
        
        <span class="token comment"># Exclude node from cluster</span>
        <span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">"https://localhost:9200/_cluster/settings"</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-k</span> <span class="token punctuation">\</span>
          <span class="token parameter variable">-d</span> <span class="token string">'{
            "persistent": {
              "cluster.routing.allocation.exclude._name": "'</span><span class="token variable">$NODE_NAME</span><span class="token string">'"
            }
          }'</span>
        
        <span class="token comment"># Wait for shards to relocate</span>
        <span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"https://localhost:9200/_cat/shards"</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token parameter variable">-k</span> <span class="token operator">|</span> <span class="token function">grep</span> $NODE_NAME <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">)</span></span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
          <span class="token builtin class-name">echo</span> <span class="token string">"Waiting for shards to relocate from <span class="token variable">$NODE_NAME</span>..."</span>
          <span class="token function">sleep</span> <span class="token number">30</span>
        <span class="token keyword">done</span>
        
        <span class="token comment"># Stop and remove container</span>
        <span class="token function">docker</span> stop <span class="token variable">$NODE_NAME</span>
        <span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable">$NODE_NAME</span>
        
        <span class="token builtin class-name">echo</span> <span class="token string">"Removed <span class="token variable">$NODE_NAME</span>"</span>
      <span class="token keyword">done</span>
      
      <span class="token comment"># Clear allocation exclusions</span>
      <span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">"https://localhost:9200/_cluster/settings"</span> <span class="token punctuation">\</span>
        <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
        <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
        <span class="token parameter variable">-k</span> <span class="token punctuation">\</span>
        <span class="token parameter variable">-d</span> <span class="token string">'{
          "persistent": {
            "cluster.routing.allocation.exclude._name": null
          }
        }'</span>
    <span class="token keyword">fi</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre>
</div>

        <h3 id="automated-scaling-with-monitoring" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#automated-scaling-with-monitoring">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Automated Scaling with Monitoring</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#automated-scaling-with-monitoring" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-python notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-python" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-python" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># auto-scaler.py - Basic auto-scaling implementation</span>

<span class="token keyword">import</span> docker
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> json
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime

<span class="token keyword">class</span> <span class="token class-name">ElasticsearchAutoScaler</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> cluster_url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>cluster_url <span class="token operator">=</span> cluster_url
        self<span class="token punctuation">.</span>auth <span class="token operator">=</span> <span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>docker_client <span class="token operator">=</span> docker<span class="token punctuation">.</span>from_env<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
    <span class="token keyword">def</span> <span class="token function">get_cluster_metrics</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Get cluster performance metrics"""</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token comment"># Cluster health</span>
            health <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
                <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>cluster_url<span class="token punctuation">}</span></span><span class="token string">/_cluster/health"</span></span><span class="token punctuation">,</span>
                auth<span class="token operator">=</span>self<span class="token punctuation">.</span>auth<span class="token punctuation">,</span>
                verify<span class="token operator">=</span><span class="token boolean">False</span>
            <span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment"># Node stats</span>
            stats <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
                <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>cluster_url<span class="token punctuation">}</span></span><span class="token string">/_nodes/stats"</span></span><span class="token punctuation">,</span>
                auth<span class="token operator">=</span>self<span class="token punctuation">.</span>auth<span class="token punctuation">,</span>
                verify<span class="token operator">=</span><span class="token boolean">False</span>
            <span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
            <span class="token comment"># Calculate average CPU and memory usage</span>
            total_cpu <span class="token operator">=</span> <span class="token number">0</span>
            total_memory_used <span class="token operator">=</span> <span class="token number">0</span>
            total_memory_max <span class="token operator">=</span> <span class="token number">0</span>
            node_count <span class="token operator">=</span> <span class="token number">0</span>
            
            <span class="token keyword">for</span> node_id<span class="token punctuation">,</span> node_stats <span class="token keyword">in</span> stats<span class="token punctuation">[</span><span class="token string">'nodes'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'data'</span> <span class="token keyword">in</span> node_stats<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'roles'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    total_cpu <span class="token operator">+=</span> node_stats<span class="token punctuation">[</span><span class="token string">'os'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'cpu'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'percent'</span><span class="token punctuation">]</span>
                    total_memory_used <span class="token operator">+=</span> node_stats<span class="token punctuation">[</span><span class="token string">'jvm'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'mem'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'heap_used_in_bytes'</span><span class="token punctuation">]</span>
                    total_memory_max <span class="token operator">+=</span> node_stats<span class="token punctuation">[</span><span class="token string">'jvm'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'mem'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'heap_max_in_bytes'</span><span class="token punctuation">]</span>
                    node_count <span class="token operator">+=</span> <span class="token number">1</span>
            
            avg_cpu <span class="token operator">=</span> total_cpu <span class="token operator">/</span> node_count <span class="token keyword">if</span> node_count <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
            memory_usage_percent <span class="token operator">=</span> <span class="token punctuation">(</span>total_memory_used <span class="token operator">/</span> total_memory_max <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">if</span> total_memory_max <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
            
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token string">'status'</span><span class="token punctuation">:</span> health<span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'active_shards'</span><span class="token punctuation">:</span> health<span class="token punctuation">[</span><span class="token string">'active_shards'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'avg_cpu_percent'</span><span class="token punctuation">:</span> avg_cpu<span class="token punctuation">,</span>
                <span class="token string">'memory_usage_percent'</span><span class="token punctuation">:</span> memory_usage_percent<span class="token punctuation">,</span>
                <span class="token string">'data_node_count'</span><span class="token punctuation">:</span> node_count
            <span class="token punctuation">}</span>
            
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Error getting cluster metrics: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>
    
    <span class="token keyword">def</span> <span class="token function">should_scale_up</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> metrics<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Determine if cluster should scale up"""</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            metrics<span class="token punctuation">[</span><span class="token string">'avg_cpu_percent'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">80</span> <span class="token keyword">or</span>
            metrics<span class="token punctuation">[</span><span class="token string">'memory_usage_percent'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">85</span> <span class="token keyword">or</span>
            metrics<span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'yellow'</span>
        <span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">should_scale_down</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> metrics<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Determine if cluster should scale down"""</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            metrics<span class="token punctuation">[</span><span class="token string">'avg_cpu_percent'</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">30</span> <span class="token keyword">and</span>
            metrics<span class="token punctuation">[</span><span class="token string">'memory_usage_percent'</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">50</span> <span class="token keyword">and</span>
            metrics<span class="token punctuation">[</span><span class="token string">'data_node_count'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token keyword">and</span>
            metrics<span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'green'</span>
        <span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">scale_up</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Add a new data node"""</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            existing_nodes <span class="token operator">=</span> self<span class="token punctuation">.</span>docker_client<span class="token punctuation">.</span>containers<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span>
                filters<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'es-data-'</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span>
            new_node_num <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>existing_nodes<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
            node_name <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"es-data-</span><span class="token interpolation"><span class="token punctuation">{</span>new_node_num<span class="token punctuation">}</span></span><span class="token string">"</span></span>
            
            container <span class="token operator">=</span> self<span class="token punctuation">.</span>docker_client<span class="token punctuation">.</span>containers<span class="token punctuation">.</span>run<span class="token punctuation">(</span>
                <span class="token string">'docker.elastic.co/elasticsearch/elasticsearch:9.1.5'</span><span class="token punctuation">,</span>
                name<span class="token operator">=</span>node_name<span class="token punctuation">,</span>
                environment<span class="token operator">=</span><span class="token punctuation">{</span>
                    <span class="token string">'node.name'</span><span class="token punctuation">:</span> node_name<span class="token punctuation">,</span>
                    <span class="token string">'node.roles'</span><span class="token punctuation">:</span> <span class="token string">'data,ingest'</span><span class="token punctuation">,</span>
                    <span class="token string">'cluster.name'</span><span class="token punctuation">:</span> <span class="token string">'production-cluster'</span><span class="token punctuation">,</span>
                    <span class="token string">'discovery.seed_hosts'</span><span class="token punctuation">:</span> <span class="token string">'es-master-1,es-master-2,es-master-3'</span><span class="token punctuation">,</span>
                    <span class="token string">'ES_JAVA_OPTS'</span><span class="token punctuation">:</span> <span class="token string">'-Xms8g -Xmx8g'</span><span class="token punctuation">,</span>
                    <span class="token string">'xpack.security.enabled'</span><span class="token punctuation">:</span> <span class="token string">'true'</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                volumes<span class="token operator">=</span><span class="token punctuation">{</span>
                    <span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>node_name<span class="token punctuation">}</span></span><span class="token string">-data'</span></span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'bind'</span><span class="token punctuation">:</span> <span class="token string">'/usr/share/elasticsearch/data'</span><span class="token punctuation">,</span> <span class="token string">'mode'</span><span class="token punctuation">:</span> <span class="token string">'rw'</span><span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                network<span class="token operator">=</span><span class="token string">'elasticsearch-production_elastic-network'</span><span class="token punctuation">,</span>
                detach<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
                restart_policy<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'Name'</span><span class="token punctuation">:</span> <span class="token string">'unless-stopped'</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span>
            
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Scaled up: Added </span><span class="token interpolation"><span class="token punctuation">{</span>node_name<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
            
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Error scaling up: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
    
    <span class="token keyword">def</span> <span class="token function">scale_down</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Remove a data node safely"""</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            data_nodes <span class="token operator">=</span> self<span class="token punctuation">.</span>docker_client<span class="token punctuation">.</span>containers<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span>
                filters<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'es-data-'</span><span class="token punctuation">}</span>
            <span class="token punctuation">)</span>
            
            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data_nodes<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Cannot scale down: Minimum 3 data nodes required"</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">False</span>
            
            <span class="token comment"># Find the node with least data</span>
            node_to_remove <span class="token operator">=</span> data_nodes<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># Remove the newest node</span>
            node_name <span class="token operator">=</span> node_to_remove<span class="token punctuation">.</span>name
            
            <span class="token comment"># Exclude node from cluster</span>
            exclude_response <span class="token operator">=</span> requests<span class="token punctuation">.</span>put<span class="token punctuation">(</span>
                <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>cluster_url<span class="token punctuation">}</span></span><span class="token string">/_cluster/settings"</span></span><span class="token punctuation">,</span>
                auth<span class="token operator">=</span>self<span class="token punctuation">.</span>auth<span class="token punctuation">,</span>
                verify<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
                json<span class="token operator">=</span><span class="token punctuation">{</span>
                    <span class="token string">"persistent"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                        <span class="token string">"cluster.routing.allocation.exclude._name"</span><span class="token punctuation">:</span> node_name
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">)</span>
            
            <span class="token keyword">if</span> exclude_response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
                <span class="token comment"># Wait for shard relocation</span>
                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
                
                <span class="token comment"># Stop and remove container</span>
                node_to_remove<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span>
                node_to_remove<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token punctuation">)</span>
                
                <span class="token comment"># Clear exclusion</span>
                requests<span class="token punctuation">.</span>put<span class="token punctuation">(</span>
                    <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>cluster_url<span class="token punctuation">}</span></span><span class="token string">/_cluster/settings"</span></span><span class="token punctuation">,</span>
                    auth<span class="token operator">=</span>self<span class="token punctuation">.</span>auth<span class="token punctuation">,</span>
                    verify<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
                    json<span class="token operator">=</span><span class="token punctuation">{</span>
                        <span class="token string">"persistent"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            <span class="token string">"cluster.routing.allocation.exclude._name"</span><span class="token punctuation">:</span> <span class="token boolean">None</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span>
                
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Scaled down: Removed </span><span class="token interpolation"><span class="token punctuation">{</span>node_name<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">True</span>
                
        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Error scaling down: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
    
    <span class="token keyword">def</span> <span class="token function">run_auto_scaler</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> check_interval<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Run the auto-scaler loop"""</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Starting Elasticsearch auto-scaler..."</span><span class="token punctuation">)</span>
        
        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                metrics <span class="token operator">=</span> self<span class="token punctuation">.</span>get_cluster_metrics<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> metrics<span class="token punctuation">:</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Cluster metrics: </span><span class="token interpolation"><span class="token punctuation">{</span>metrics<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    
                    <span class="token keyword">if</span> self<span class="token punctuation">.</span>should_scale_up<span class="token punctuation">(</span>metrics<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Scaling up cluster..."</span><span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>scale_up<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>should_scale_down<span class="token punctuation">(</span>metrics<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Scaling down cluster..."</span><span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>scale_down<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No scaling action needed"</span><span class="token punctuation">)</span>
                
                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>check_interval<span class="token punctuation">)</span>
                
            <span class="token keyword">except</span> KeyboardInterrupt<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Auto-scaler stopped"</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
            <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Auto-scaler error: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>check_interval<span class="token punctuation">)</span>

<span class="token comment"># Usage</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    scaler <span class="token operator">=</span> ElasticsearchAutoScaler<span class="token punctuation">(</span>
        cluster_url<span class="token operator">=</span><span class="token string">"https://localhost:9200"</span><span class="token punctuation">,</span>
        username<span class="token operator">=</span><span class="token string">"elastic"</span><span class="token punctuation">,</span>
        password<span class="token operator">=</span><span class="token string">"your_password"</span>
    <span class="token punctuation">)</span>
    scaler<span class="token punctuation">.</span>run_auto_scaler<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</div>
<hr>

        <h2 id="production-deployment-checklist" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#production-deployment-checklist">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Production Deployment Checklist</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#production-deployment-checklist" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="pre-deployment-verification" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#pre-deployment-verification">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Pre-Deployment Verification</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#pre-deployment-verification" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># pre-deployment-check.sh - Production readiness verification</span>

<span class="token builtin class-name">echo</span> <span class="token string">"=== Elasticsearch Docker Production Deployment Checklist ==="</span>

<span class="token comment"># System requirements check</span>
<span class="token function-name function">check_system_requirements</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"1. Checking system requirements..."</span>
    
    <span class="token comment"># Memory check (minimum 8GB)</span>
    <span class="token assign-left variable">total_memory</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">free</span> <span class="token parameter variable">-g</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/^Mem:/{print $2}'</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$total_memory</span> <span class="token parameter variable">-lt</span> <span class="token number">8</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Insufficient memory: <span class="token variable">${total_memory}</span>GB (minimum 8GB required)"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Memory: <span class="token variable">${total_memory}</span>GB"</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Disk space check (minimum 100GB)</span>
    <span class="token assign-left variable">available_disk</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">df</span> <span class="token parameter variable">-BG</span> / <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'NR==2{print $4}'</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/G//'</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$available_disk</span> <span class="token parameter variable">-lt</span> <span class="token number">100</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Insufficient disk space: <span class="token variable">${available_disk}</span>GB (minimum 100GB required)"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Disk space: <span class="token variable">${available_disk}</span>GB"</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Docker version check</span>
    <span class="token assign-left variable">docker_version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token parameter variable">--version</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-oP</span> <span class="token string">'\d+\.\d+\.\d+'</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">" Docker version: <span class="token variable">$docker_version</span>"</span>
    
    <span class="token comment"># Docker Compose version check</span>
    <span class="token assign-left variable">compose_version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker-compose</span> <span class="token parameter variable">--version</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-oP</span> <span class="token string">'\d+\.\d+\.\d+'</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">" Docker Compose version: <span class="token variable">$compose_version</span>"</span>
<span class="token punctuation">}</span>

<span class="token comment"># Network configuration check</span>
<span class="token function-name function">check_network_config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"2. Checking network configuration..."</span>
    
    <span class="token comment"># Port availability</span>
    <span class="token assign-left variable">ports</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9200</span> <span class="token number">9300</span> <span class="token number">5601</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">port</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">${ports<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>"</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token keyword">if</span> <span class="token function">netstat</span> <span class="token parameter variable">-tuln</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-q</span> <span class="token string">":<span class="token variable">$port</span> "</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">" Port <span class="token variable">$port</span> is already in use"</span>
            <span class="token builtin class-name">exit</span> <span class="token number">1</span>
        <span class="token keyword">else</span>
            <span class="token builtin class-name">echo</span> <span class="token string">" Port <span class="token variable">$port</span> is available"</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">done</span>
    
    <span class="token comment"># Firewall rules (basic check)</span>
    <span class="token keyword">if</span> <span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> ufw <span class="token operator">&amp;&gt;</span> /dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">ufw_status</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>ufw status <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"Status:"</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $2}'</span><span class="token variable">)</span></span>
        <span class="token builtin class-name">echo</span> <span class="token string">" UFW status: <span class="token variable">$ufw_status</span>"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Security configuration check</span>
<span class="token function-name function">check_security_config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"3. Checking security configuration..."</span>
    
    <span class="token comment"># Certificate files</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"certs/elastic-certificates.p12"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" SSL certificates present"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" SSL certificates missing"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Environment variables</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$ELASTIC_PASSWORD</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" ELASTIC_PASSWORD not set"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" ELASTIC_PASSWORD configured"</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># File permissions</span>
    <span class="token assign-left variable">cert_perms</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">stat</span> <span class="token parameter variable">-c</span> %a certs/elastic-certificates.p12<span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$cert_perms</span>"</span> <span class="token operator">=</span> <span class="token string">"644"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Certificate permissions correct"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Certificate permissions: <span class="token variable">$cert_perms</span> (should be 644)"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Resource limits check</span>
<span class="token function-name function">check_resource_limits</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"4. Checking resource limits..."</span>
    
    <span class="token comment"># vm.max_map_count</span>
    <span class="token assign-left variable">max_map_count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sysctl</span> vm.max_map_count <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $3}'</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$max_map_count</span> <span class="token parameter variable">-lt</span> <span class="token number">262144</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" vm.max_map_count too low: <span class="token variable">$max_map_count</span> (should be 262144)"</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Run: sudo sysctl -w vm.max_map_count=262144"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" vm.max_map_count: <span class="token variable">$max_map_count</span>"</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># ulimit checks</span>
    <span class="token assign-left variable">nofile_limit</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">ulimit</span> <span class="token parameter variable">-n</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$nofile_limit</span> <span class="token parameter variable">-lt</span> <span class="token number">65536</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  File descriptor limit low: <span class="token variable">$nofile_limit</span> (recommended: 65536)"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" File descriptor limit: <span class="token variable">$nofile_limit</span>"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Docker configuration check</span>
<span class="token function-name function">check_docker_config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"5. Checking Docker configuration..."</span>
    
    <span class="token comment"># Docker daemon status</span>
    <span class="token keyword">if</span> systemctl is-active <span class="token parameter variable">--quiet</span> <span class="token function">docker</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Docker daemon running"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Docker daemon not running"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Docker compose file validation</span>
    <span class="token keyword">if</span> <span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> docker-compose.production.yml config <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Docker Compose configuration valid"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Docker Compose configuration invalid"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Available disk space for Docker</span>
    <span class="token assign-left variable">docker_root</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> info <span class="token parameter variable">--format</span> <span class="token string">'{{.DockerRootDir}}'</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">docker_disk</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">df</span> <span class="token parameter variable">-BG</span> <span class="token string">"<span class="token variable">$docker_root</span>"</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'NR==2{print $4}'</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/G//'</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$docker_disk</span> <span class="token parameter variable">-lt</span> <span class="token number">50</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Low disk space for Docker: <span class="token variable">${docker_disk}</span>GB"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Docker disk space: <span class="token variable">${docker_disk}</span>GB"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Monitoring setup check</span>
<span class="token function-name function">check_monitoring_setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"6. Checking monitoring setup..."</span>
    
    <span class="token comment"># Prometheus configuration</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"prometheus.yml"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Prometheus configuration present"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Prometheus configuration missing"</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Grafana dashboards</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">"grafana/dashboards"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Grafana dashboards present"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Grafana dashboards missing"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Backup configuration check</span>
<span class="token function-name function">check_backup_config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"7. Checking backup configuration..."</span>
    
    <span class="token comment"># Backup directory</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">"/var/lib/docker/volumes/elasticsearch-backup"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Backup directory exists"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Backup directory not found"</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Backup script</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"elasticsearch-backup.sh"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token string">"elasticsearch-backup.sh"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Backup script executable"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Backup script missing or not executable"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Run all checks</span>
<span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    check_system_requirements
    check_network_config
    check_security_config
    check_resource_limits
    check_docker_config
    check_monitoring_setup
    check_backup_config
    
    <span class="token builtin class-name">echo</span> <span class="token string">""</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"=== Pre-deployment checks completed ==="</span>
    <span class="token builtin class-name">echo</span> <span class="token string">" System ready for Elasticsearch Docker deployment"</span>
<span class="token punctuation">}</span>

main
</code></pre>
</div>

        <h3 id="post-deployment-validation" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#post-deployment-validation">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Post-Deployment Validation</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#post-deployment-validation" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># post-deployment-validation.sh - Verify successful deployment</span>

<span class="token assign-left variable">CLUSTER_URL</span><span class="token operator">=</span><span class="token string">"https://localhost:9200"</span>
<span class="token assign-left variable">KIBANA_URL</span><span class="token operator">=</span><span class="token string">"http://localhost:5601"</span>

<span class="token builtin class-name">echo</span> <span class="token string">"=== Post-Deployment Validation ==="</span>

<span class="token comment"># Wait for cluster to be ready</span>
<span class="token function-name function">wait_for_cluster</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"1. Waiting for cluster to be ready..."</span>
    <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">300</span>
    <span class="token assign-left variable">elapsed</span><span class="token operator">=</span><span class="token number">0</span>
    
    <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$elapsed</span> <span class="token parameter variable">-lt</span> <span class="token variable">$timeout</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token keyword">if</span> <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_cluster/health"</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">" Cluster is responding"</span>
            <span class="token builtin class-name">break</span>
        <span class="token keyword">fi</span>
        <span class="token function">sleep</span> <span class="token number">10</span>
        <span class="token assign-left variable">elapsed</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>elapsed <span class="token operator">+</span> <span class="token number">10</span><span class="token variable">))</span></span>
    <span class="token keyword">done</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$elapsed</span> <span class="token parameter variable">-ge</span> <span class="token variable">$timeout</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Cluster failed to start within <span class="token variable">$timeout</span> seconds"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Validate cluster health</span>
<span class="token function-name function">validate_cluster_health</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"2. Validating cluster health..."</span>
    
    <span class="token assign-left variable">health</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_cluster/health"</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $health <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.status'</span><span class="token variable">)</span></span>
    
    <span class="token keyword">case</span> <span class="token variable">$status</span> <span class="token keyword">in</span>
        <span class="token string">"green"</span><span class="token punctuation">)</span>
            <span class="token builtin class-name">echo</span> <span class="token string">" Cluster status: GREEN"</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token string">"yellow"</span><span class="token punctuation">)</span>
            <span class="token builtin class-name">echo</span> <span class="token string">"  Cluster status: YELLOW"</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        <span class="token string">"red"</span><span class="token punctuation">)</span>
            <span class="token builtin class-name">echo</span> <span class="token string">" Cluster status: RED"</span>
            <span class="token builtin class-name">exit</span> <span class="token number">1</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span>
            <span class="token builtin class-name">echo</span> <span class="token string">" Unable to determine cluster status"</span>
            <span class="token builtin class-name">exit</span> <span class="token number">1</span>
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
    
    <span class="token comment"># Node count validation</span>
    <span class="token assign-left variable">node_count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $health <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.number_of_nodes'</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">expected_nodes</span><span class="token operator">=</span><span class="token number">6</span>  <span class="token comment"># 3 master + 2 data + 1 coordinating</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$node_count</span> <span class="token parameter variable">-eq</span> <span class="token variable">$expected_nodes</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Node count: <span class="token variable">$node_count</span>/<span class="token variable">$expected_nodes</span>"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Node count: <span class="token variable">$node_count</span>/<span class="token variable">$expected_nodes</span> (expected <span class="token variable">$expected_nodes</span>)"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Test basic operations</span>
<span class="token function-name function">test_basic_operations</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"3. Testing basic operations..."</span>
    
    <span class="token comment"># Create test index</span>
    <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-X</span> PUT <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/test-index"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-d</span> <span class="token string">'{
           "settings": {
             "number_of_shards": 2,
             "number_of_replicas": 1
           }
         }'</span> <span class="token operator">&gt;</span> /dev/null
    
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Index creation successful"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Index creation failed"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Index test document</span>
    <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-X</span> POST <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/test-index/_doc"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-d</span> <span class="token string">'{
           "message": "Test document",
           "timestamp": "'</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token parameter variable">-u</span> +%Y-%m-%dT%H:%M:%S.%3NZ<span class="token variable">)</span></span><span class="token string">'"
         }'</span> <span class="token operator">&gt;</span> /dev/null
    
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Document indexing successful"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Document indexing failed"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Search test</span>
    <span class="token function">sleep</span> <span class="token number">2</span>  <span class="token comment"># Wait for document to be indexed</span>
    <span class="token assign-left variable">search_result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
                         <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/test-index/_search"</span> <span class="token punctuation">\</span>
                         <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
                         <span class="token parameter variable">-d</span> <span class="token string">'{"query": {"match_all": {}}}'</span><span class="token variable">)</span></span>
    
    <span class="token assign-left variable">hit_count</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $search_result <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.hits.total.value'</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$hit_count</span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Search functionality working"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Search functionality failed"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Cleanup test index</span>
    <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-X</span> DELETE <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/test-index"</span> <span class="token operator">&gt;</span> /dev/null
<span class="token punctuation">}</span>

<span class="token comment"># Validate security</span>
<span class="token function-name function">validate_security</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"4. Validating security configuration..."</span>
    
    <span class="token comment"># Test authentication</span>
    <span class="token assign-left variable">auth_test</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_cluster/health"</span> <span class="token parameter variable">-w</span> <span class="token string">"%{http_code}"</span><span class="token variable">)</span></span>
    
    <span class="token keyword">if</span> <span class="token builtin class-name">echo</span> <span class="token variable">$auth_test</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-q</span> <span class="token string">"401"</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Authentication required (401 response)"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Authentication not properly configured"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Test SSL/TLS</span>
    <span class="token assign-left variable">ssl_test</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-I</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>"</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token builtin class-name">echo</span> <span class="token variable">$ssl_test</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-q</span> <span class="token string">"200"</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" SSL/TLS enabled and working"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" SSL/TLS configuration issue"</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Validate monitoring</span>
<span class="token function-name function">validate_monitoring</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"5. Validating monitoring setup..."</span>
    
    <span class="token comment"># Check if Prometheus is accessible</span>
    <span class="token keyword">if</span> <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"http://localhost:9090/-/healthy"</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Prometheus accessible"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Prometheus not accessible"</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Check if Grafana is accessible</span>
    <span class="token keyword">if</span> <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"http://localhost:3000/api/health"</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Grafana accessible"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Grafana not accessible"</span>
    <span class="token keyword">fi</span>
    
    <span class="token comment"># Check if Kibana is accessible</span>
    <span class="token assign-left variable">kibana_status</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">${KIBANA_URL}</span>/api/status"</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.status.overall.state'</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null<span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$kibana_status</span>"</span> <span class="token operator">=</span> <span class="token string">"green"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">" Kibana accessible and healthy"</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"  Kibana status: <span class="token variable">$kibana_status</span>"</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># Performance baseline test</span>
<span class="token function-name function">performance_baseline</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"6. Running performance baseline test..."</span>
    
    <span class="token comment"># Create performance test index</span>
    <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-X</span> PUT <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/perf-test"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-d</span> <span class="token string">'{
           "settings": {
             "number_of_shards": 4,
             "number_of_replicas": 1,
             "refresh_interval": "30s"
           },
           "mappings": {
             "properties": {
               "timestamp": {"type": "date"},
               "message": {"type": "text"},
               "level": {"type": "keyword"},
               "host": {"type": "keyword"}
             }
           }
         }'</span> <span class="token operator">&gt;</span> /dev/null
    
    <span class="token comment"># Index test documents</span>
    <span class="token assign-left variable">start_time</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s%3N<span class="token variable">)</span></span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1000</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
             <span class="token parameter variable">-X</span> POST <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/perf-test/_doc"</span> <span class="token punctuation">\</span>
             <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
             <span class="token parameter variable">-d</span> <span class="token string">'{
               "timestamp": "'</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token parameter variable">-u</span> +%Y-%m-%dT%H:%M:%S.%3NZ<span class="token variable">)</span></span><span class="token string">'",
               "message": "Performance test message '</span><span class="token variable">${i}</span><span class="token string">'",
               "level": "info",
               "host": "test-host-'</span><span class="token variable"><span class="token variable">$((</span>i <span class="token operator">%</span> <span class="token number">10</span><span class="token variable">))</span></span><span class="token string">'"
             }'</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator">&amp;</span>
        
        <span class="token comment"># Batch requests to avoid overwhelming the cluster</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$((</span>i <span class="token operator">%</span> <span class="token number">50</span><span class="token variable">))</span></span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token function">wait</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">done</span>
    <span class="token function">wait</span>
    
    <span class="token assign-left variable">end_time</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s%3N<span class="token variable">)</span></span>
    <span class="token assign-left variable">duration</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>end_time <span class="token operator">-</span> start_time<span class="token variable">))</span></span>
    <span class="token assign-left variable">throughput</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">/</span> duration<span class="token variable">))</span></span>
    
    <span class="token builtin class-name">echo</span> <span class="token string">" Indexing performance: <span class="token variable">${throughput}</span> docs/second"</span>
    
    <span class="token comment"># Test search performance</span>
    <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-X</span> POST <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/perf-test/_refresh"</span> <span class="token operator">&gt;</span> /dev/null
    
    <span class="token assign-left variable">search_start</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s%3N<span class="token variable">)</span></span>
    <span class="token assign-left variable">search_result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
                         <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/perf-test/_search"</span> <span class="token punctuation">\</span>
                         <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
                         <span class="token parameter variable">-d</span> <span class="token string">'{
                           "query": {
                             "bool": {
                               "must": [
                                 {"range": {"timestamp": {"gte": "now-1h"}}},
                                 {"term": {"level": "info"}}
                               ]
                             }
                           },
                           "size": 100,
                           "sort": [{"timestamp": "desc"}]
                         }'</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">search_end</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s%3N<span class="token variable">)</span></span>
    <span class="token assign-left variable">search_duration</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>search_end <span class="token operator">-</span> search_start<span class="token variable">))</span></span>
    
    <span class="token builtin class-name">echo</span> <span class="token string">" Search performance: <span class="token variable">${search_duration}</span>ms response time"</span>
    
    <span class="token comment"># Cleanup performance test index</span>
    <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-X</span> DELETE <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/perf-test"</span> <span class="token operator">&gt;</span> /dev/null
<span class="token punctuation">}</span>

<span class="token comment"># Generate deployment report</span>
<span class="token function-name function">generate_report</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"7. Generating deployment report..."</span>
    
    <span class="token comment"># Cluster information</span>
    <span class="token assign-left variable">cluster_info</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>"</span><span class="token variable">)</span></span>
    <span class="token assign-left variable">cluster_stats</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-u</span> <span class="token string">"elastic:<span class="token variable">${ELASTIC_PASSWORD}</span>"</span> <span class="token string">"<span class="token variable">${CLUSTER_URL}</span>/_cluster/stats"</span><span class="token variable">)</span></span>
    
    <span class="token function">cat</span> <span class="token operator">&gt;</span> deployment-report.json <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
{
  "deployment_timestamp": "<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token parameter variable">-u</span> +%Y-%m-%dT%H:%M:%S.%3NZ<span class="token variable">)</span></span>",
  "cluster_info": {
    "name": "<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_info <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.cluster_name'</span><span class="token variable">)</span></span>",
    "version": "<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_info <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.version.number'</span><span class="token variable">)</span></span>",
    "uuid": "<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_info <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.cluster_uuid'</span><span class="token variable">)</span></span>"
  },
  "node_stats": {
    "total_nodes": <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_stats <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.nodes.count.total'</span><span class="token variable">)</span></span>,
    "master_nodes": <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_stats <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.nodes.count.master'</span><span class="token variable">)</span></span>,
    "data_nodes": <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_stats <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.nodes.count.data'</span><span class="token variable">)</span></span>,
    "coordinating_nodes": <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_stats <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.nodes.count.coordinating_only'</span><span class="token variable">)</span></span>
  },
  "resource_usage": {
    "total_memory": "<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_stats <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.nodes.jvm.mem.heap_max_in_bytes'</span><span class="token variable">)</span></span>",
    "used_memory": "<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_stats <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.nodes.jvm.mem.heap_used_in_bytes'</span><span class="token variable">)</span></span>",
    "total_disk": "<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_stats <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.nodes.fs.total_in_bytes'</span><span class="token variable">)</span></span>",
    "available_disk": "<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $cluster_stats <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.nodes.fs.available_in_bytes'</span><span class="token variable">)</span></span>"
  },
  "validation_results": {
    "cluster_health": "PASSED",
    "basic_operations": "PASSED",
    "security": "PASSED",
    "monitoring": "PASSED",
    "performance": "PASSED"
  }
}
EOF</span>
    
    <span class="token builtin class-name">echo</span> <span class="token string">" Deployment report saved to deployment-report.json"</span>
<span class="token punctuation">}</span>

<span class="token comment"># Run all validations</span>
<span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wait_for_cluster
    validate_cluster_health
    test_basic_operations
    validate_security
    validate_monitoring
    performance_baseline
    generate_report
    
    <span class="token builtin class-name">echo</span> <span class="token string">""</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"=== Post-Deployment Validation Completed ==="</span>
    <span class="token builtin class-name">echo</span> <span class="token string">" Elasticsearch Docker cluster is ready for production"</span>
<span class="token punctuation">}</span>

main
</code></pre>
</div>
<hr>

        <h2 id="decision-matrix-when-to-choose-docker" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#decision-matrix-when-to-choose-docker">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Decision Matrix: When to Choose Docker</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#decision-matrix-when-to-choose-docker" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="docker-vs-other-deployment-methods" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#docker-vs-other-deployment-methods">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Docker vs Other Deployment Methods</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#docker-vs-other-deployment-methods" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="table-wrapper"><table class="highlight tab-size js-file-line-container">
<thead>
<tr>
<th><strong>Criteria</strong></th>
<th><strong>Docker Compose</strong></th>
<th><strong>Docker Swarm</strong></th>
<th><strong>Kubernetes</strong></th>
<th><strong>Elastic Cloud</strong></th>
<th><strong>Self-Managed VMs</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Setup Complexity</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Operational Overhead</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Scalability</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Cost Efficiency</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Learning Curve</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>High Availability</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Multi-Cloud Support</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Monitoring Integration</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table></div>

        <h3 id="quantitative-decision-framework" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#quantitative-decision-framework">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Quantitative Decision Framework</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#quantitative-decision-framework" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-python notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-python" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-python" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># docker-decision-matrix.py - Quantitative assessment tool</span>

<span class="token keyword">class</span> <span class="token class-name">DockerDeploymentDecisionMatrix</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> team_size<span class="token punctuation">,</span> data_size_tb<span class="token punctuation">,</span> budget_monthly<span class="token punctuation">,</span> 
                 docker_expertise<span class="token punctuation">,</span> availability_requirement<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>team_size <span class="token operator">=</span> team_size
        self<span class="token punctuation">.</span>data_size_tb <span class="token operator">=</span> data_size_tb
        self<span class="token punctuation">.</span>budget_monthly <span class="token operator">=</span> budget_monthly
        self<span class="token punctuation">.</span>docker_expertise <span class="token operator">=</span> docker_expertise  <span class="token comment"># 1-5 scale</span>
        self<span class="token punctuation">.</span>availability_requirement <span class="token operator">=</span> availability_requirement  <span class="token comment"># 99.9, 99.99, etc.</span>
    
    <span class="token keyword">def</span> <span class="token function">calculate_docker_suitability_score</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Calculate suitability score for Docker deployment (0-100)"""</span>
        score <span class="token operator">=</span> <span class="token number">0</span>
        max_score <span class="token operator">=</span> <span class="token number">100</span>
        
        <span class="token comment"># Team size factor (Docker works well for small-medium teams)</span>
        <span class="token keyword">if</span> <span class="token number">2</span> <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>team_size <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">20</span>
        <span class="token keyword">elif</span> <span class="token number">10</span> <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>team_size <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">15</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">5</span>
        
        <span class="token comment"># Data size factor (Docker optimal for medium scale)</span>
        <span class="token keyword">if</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> self<span class="token punctuation">.</span>data_size_tb <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">25</span>
        <span class="token keyword">elif</span> <span class="token number">20</span> <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>data_size_tb <span class="token operator">&lt;=</span> <span class="token number">50</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">20</span>
        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>data_size_tb <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">15</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">10</span>
        
        <span class="token comment"># Budget factor (Docker is cost-effective)</span>
        cost_per_tb <span class="token operator">=</span> self<span class="token punctuation">.</span>budget_monthly <span class="token operator">/</span> <span class="token builtin">max</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>data_size_tb<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> cost_per_tb <span class="token operator">&gt;=</span> <span class="token number">500</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">20</span>  <span class="token comment"># High budget - flexibility to choose</span>
        <span class="token keyword">elif</span> <span class="token number">200</span> <span class="token operator">&lt;=</span> cost_per_tb <span class="token operator">&lt;</span> <span class="token number">500</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">25</span>  <span class="token comment"># Medium budget - Docker sweet spot</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">15</span>  <span class="token comment"># Low budget - Docker still viable</span>
        
        <span class="token comment"># Expertise factor</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>docker_expertise <span class="token operator">&gt;=</span> <span class="token number">4</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">20</span>
        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>docker_expertise <span class="token operator">&gt;=</span> <span class="token number">3</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">15</span>
        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>docker_expertise <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">10</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">5</span>
        
        <span class="token comment"># Availability requirement factor</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>availability_requirement <span class="token operator">&gt;=</span> <span class="token number">99.99</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">5</span>   <span class="token comment"># Docker can achieve this but requires more setup</span>
        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>availability_requirement <span class="token operator">&gt;=</span> <span class="token number">99.9</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">15</span>  <span class="token comment"># Docker handles this well</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            score <span class="token operator">+=</span> <span class="token number">10</span>
        
        <span class="token keyword">return</span> <span class="token builtin">min</span><span class="token punctuation">(</span>score<span class="token punctuation">,</span> max_score<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_recommendation</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Get deployment recommendation with reasoning"""</span>
        score <span class="token operator">=</span> self<span class="token punctuation">.</span>calculate_docker_suitability_score<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token keyword">if</span> score <span class="token operator">&gt;=</span> <span class="token number">80</span><span class="token punctuation">:</span>
            recommendation <span class="token operator">=</span> <span class="token string">"STRONGLY RECOMMENDED"</span>
            reason <span class="token operator">=</span> <span class="token string">"Docker is an excellent fit for your requirements"</span>
        <span class="token keyword">elif</span> score <span class="token operator">&gt;=</span> <span class="token number">60</span><span class="token punctuation">:</span>
            recommendation <span class="token operator">=</span> <span class="token string">"RECOMMENDED"</span>
            reason <span class="token operator">=</span> <span class="token string">"Docker is a good choice with some considerations"</span>
        <span class="token keyword">elif</span> score <span class="token operator">&gt;=</span> <span class="token number">40</span><span class="token punctuation">:</span>
            recommendation <span class="token operator">=</span> <span class="token string">"CONSIDER WITH CAUTION"</span>
            reason <span class="token operator">=</span> <span class="token string">"Docker may work but evaluate alternatives"</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            recommendation <span class="token operator">=</span> <span class="token string">"NOT RECOMMENDED"</span>
            reason <span class="token operator">=</span> <span class="token string">"Other deployment methods likely better suited"</span>
        
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token string">'score'</span><span class="token punctuation">:</span> score<span class="token punctuation">,</span>
            <span class="token string">'recommendation'</span><span class="token punctuation">:</span> recommendation<span class="token punctuation">,</span>
            <span class="token string">'reason'</span><span class="token punctuation">:</span> reason<span class="token punctuation">,</span>
            <span class="token string">'considerations'</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>_get_considerations<span class="token punctuation">(</span>score<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    
    <span class="token keyword">def</span> <span class="token function">_get_considerations</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Get specific considerations based on score"""</span>
        considerations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>team_size <span class="token operator">&gt;</span> <span class="token number">15</span><span class="token punctuation">:</span>
            considerations<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"Large team may benefit from Kubernetes orchestration"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>data_size_tb <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">:</span>
            considerations<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"Large data volume may require specialized infrastructure"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>docker_expertise <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">:</span>
            considerations<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"Consider Docker training or managed services"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>availability_requirement <span class="token operator">&gt;=</span> <span class="token number">99.99</span><span class="token punctuation">:</span>
            considerations<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"Implement comprehensive monitoring and automated failover"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>budget_monthly <span class="token operator">/</span> self<span class="token punctuation">.</span>data_size_tb <span class="token operator">&lt;</span> <span class="token number">200</span><span class="token punctuation">:</span>
            considerations<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"Focus on cost optimization and resource efficiency"</span><span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> considerations

<span class="token comment"># Interactive assessment</span>
<span class="token keyword">def</span> <span class="token function">run_assessment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"=== Docker Elasticsearch Deployment Assessment ==="</span><span class="token punctuation">)</span>
    
    team_size <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"Team size (number of engineers): "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    data_size_tb <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"Expected data size (TB): "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    budget_monthly <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"Monthly budget ($): "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    docker_expertise <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"Team Docker expertise (1-5 scale): "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    availability_requirement <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"Availability requirement (e.g., 99.9): "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    assessor <span class="token operator">=</span> DockerDeploymentDecisionMatrix<span class="token punctuation">(</span>
        team_size<span class="token punctuation">,</span> data_size_tb<span class="token punctuation">,</span> budget_monthly<span class="token punctuation">,</span> 
        docker_expertise<span class="token punctuation">,</span> availability_requirement
    <span class="token punctuation">)</span>
    
    result <span class="token operator">=</span> assessor<span class="token punctuation">.</span>get_recommendation<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"\n=== Assessment Results ==="</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Suitability Score: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">[</span><span class="token string">'score'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">/100"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Recommendation: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">[</span><span class="token string">'recommendation'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Reason: </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">[</span><span class="token string">'reason'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> result<span class="token punctuation">[</span><span class="token string">'considerations'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"\nConsiderations:"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> consideration <span class="token keyword">in</span> result<span class="token punctuation">[</span><span class="token string">'considerations'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f" </span><span class="token interpolation"><span class="token punctuation">{</span>consideration<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    run_assessment<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</div>
<hr>

        <h2 id="real-world-case-studies" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#real-world-case-studies">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Real-World Case Studies</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#real-world-case-studies" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="case-study-1-e-commerce-search-platform" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#case-study-1-e-commerce-search-platform">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Case Study 1: E-commerce Search Platform</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#case-study-1-e-commerce-search-platform" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<p><strong>Company Profile:</strong></p>
<ul>
<li>Mid-size e-commerce platform</li>
<li>5 million products, 100GB search index</li>
<li>1,000 searches per second peak</li>
<li>8-person engineering team</li>
</ul>
<p><strong>Requirements:</strong></p>
<ul>
<li>99.9% uptime</li>
<li>Sub-100ms search response</li>
<li>Cost optimization priority</li>
<li>Rapid deployment capability</li>
</ul>
<p><strong>Docker Solution:</strong></p>
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># ecommerce-stack.yml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-search</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 8G
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 4G
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> cluster.name=ecommerce<span class="token punctuation">-</span>search
      <span class="token punctuation">-</span> node.roles=data<span class="token punctuation">,</span>ingest
      <span class="token punctuation">-</span> discovery.type=zen
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms4g -Xmx4g"</span>
      <span class="token punctuation">-</span> indices.queries.cache.size=15%
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> search<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9200:9200"</span>
    
  <span class="token key atrule">redis-cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>alpine
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> redis<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/data
    
  <span class="token key atrule">nginx-lb</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>alpine
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"80:80"</span>
    <span class="token key atrule">configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">source</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>config
        <span class="token key atrule">target</span><span class="token punctuation">:</span> /etc/nginx/nginx.conf

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">search-data</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis-data</span><span class="token punctuation">:</span>

<span class="token key atrule">configs</span><span class="token punctuation">:</span>
  <span class="token key atrule">nginx-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre>
</div>
<p><strong>Results:</strong></p>
<ul>
<li>Deployment time: 2 hours</li>
<li>Monthly cost: $1,200 (vs $4,000 Elastic Cloud)</li>
<li>Average response time: 45ms</li>
<li>99.95% uptime achieved</li>
</ul>

        <h3 id="case-study-2-log-analytics-platform" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#case-study-2-log-analytics-platform">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Case Study 2: Log Analytics Platform</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#case-study-2-log-analytics-platform" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<p><strong>Company Profile:</strong></p>
<ul>
<li>DevOps consulting company</li>
<li>500GB daily log ingestion</li>
<li>30-day retention requirement</li>
<li>12-person team across multiple time zones</li>
</ul>
<p><strong>Requirements:</strong></p>
<ul>
<li>Real-time log processing</li>
<li>Multi-tenant isolation</li>
<li>Automated scaling</li>
<li>Comprehensive monitoring</li>
</ul>
<p><strong>Docker Solution:</strong></p>
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># log-analytics-stack.yml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-hot</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">4</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.roles=data_hot<span class="token punctuation">,</span>ingest
      <span class="token punctuation">-</span> cluster.name=log<span class="token punctuation">-</span>analytics
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms16g -Xmx16g"</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> hot<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
    
  <span class="token key atrule">elasticsearch-warm</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> node.roles=data_warm
      <span class="token punctuation">-</span> cluster.name=log<span class="token punctuation">-</span>analytics
      <span class="token punctuation">-</span> <span class="token string">"ES_JAVA_OPTS=-Xms8g -Xmx8g"</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> warm<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
    
  <span class="token key atrule">logstash</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/logstash/logstash<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"LS_JAVA_OPTS=-Xmx2g -Xms2g"</span>
    <span class="token key atrule">configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">source</span><span class="token punctuation">:</span> logstash<span class="token punctuation">-</span>pipeline
        <span class="token key atrule">target</span><span class="token punctuation">:</span> /usr/share/logstash/pipeline/logstash.conf
    
  <span class="token key atrule">filebeat</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/beats/filebeat<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">mode</span><span class="token punctuation">:</span> global
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /var/log<span class="token punctuation">:</span>/var/log<span class="token punctuation">:</span>ro
      <span class="token punctuation">-</span> /var/lib/docker/containers<span class="token punctuation">:</span>/var/lib/docker/containers<span class="token punctuation">:</span>ro
    
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">hot-data</span><span class="token punctuation">:</span>
  <span class="token key atrule">warm-data</span><span class="token punctuation">:</span>

<span class="token key atrule">configs</span><span class="token punctuation">:</span>
  <span class="token key atrule">logstash-pipeline</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre>
</div>
<p><strong>Results:</strong></p>
<ul>
<li>Processing capacity: 750GB/day</li>
<li>Search performance: &lt;200ms average</li>
<li>Cost savings: 65% vs managed solution</li>
<li>Zero data loss in 6 months operation</li>
</ul>

        <h3 id="case-study-3-financial-services-compliance" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#case-study-3-financial-services-compliance">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Case Study 3: Financial Services Compliance</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#case-study-3-financial-services-compliance" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<p><strong>Company Profile:</strong></p>
<ul>
<li>Regional bank</li>
<li>Regulatory compliance requirements</li>
<li>200GB daily transaction logs</li>
<li>Strict security and audit requirements</li>
</ul>
<p><strong>Requirements:</strong></p>
<ul>
<li>SOC 2 Type II compliance</li>
<li>End-to-end encryption</li>
<li>Audit trail preservation</li>
<li>7-year data retention</li>
</ul>
<p><strong>Docker Solution:</strong></p>
<div class="highlight highlight-yaml notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-yaml" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-yaml" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token comment"># compliance-stack.yml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-compliance</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.elastic.co/elasticsearch/elasticsearch<span class="token punctuation">:</span>9.1.5
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">6</span>
      <span class="token key atrule">placement</span><span class="token punctuation">:</span>
        <span class="token key atrule">constraints</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> node.labels.security.clearance == high
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> xpack.security.enabled=true
      <span class="token punctuation">-</span> xpack.security.audit.enabled=true
      <span class="token punctuation">-</span> xpack.security.transport.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.security.http.ssl.enabled=true
      <span class="token punctuation">-</span> xpack.ml.enabled=true
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> compliance<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/usr/share/elasticsearch/data
      <span class="token punctuation">-</span> ssl<span class="token punctuation">-</span>certs<span class="token punctuation">:</span>/usr/share/elasticsearch/config/certs<span class="token punctuation">:</span>ro
    <span class="token key atrule">secrets</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>keystore
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">-</span>certs
    
  <span class="token key atrule">vault-integration</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> vault<span class="token punctuation">:</span>latest
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> VAULT_DEV_ROOT_TOKEN_ID=myroot
      <span class="token punctuation">-</span> VAULT_DEV_LISTEN_ADDRESS=0.0.0.0<span class="token punctuation">:</span><span class="token number">8200</span>
    
<span class="token key atrule">secrets</span><span class="token punctuation">:</span>
  <span class="token key atrule">elasticsearch-keystore</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">elasticsearch-certs</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">compliance-data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
    <span class="token key atrule">driver_opts</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> none
      <span class="token key atrule">o</span><span class="token punctuation">:</span> bind
      <span class="token key atrule">device</span><span class="token punctuation">:</span> /encrypted/elasticsearch<span class="token punctuation">-</span>data

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">compliance-network</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> overlay
    <span class="token key atrule">encrypted</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre>
</div>
<p><strong>Results:</strong></p>
<ul>
<li>Compliance audit: Passed all requirements</li>
<li>Security incidents: Zero in 18 months</li>
<li>Audit query performance: &lt;1 second</li>
<li>Total cost: 40% less than specialized solutions</li>
</ul>
<hr>

        <h2 id="migration-and-upgrade-strategies" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#migration-and-upgrade-strategies">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Migration and Upgrade Strategies</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#migration-and-upgrade-strategies" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      

        <h3 id="blue-green-deployment-pattern" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#blue-green-deployment-pattern">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Blue-Green Deployment Pattern</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#blue-green-deployment-pattern" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># blue-green-deployment.sh - Zero-downtime updates</span>

<span class="token assign-left variable">CURRENT_STACK</span><span class="token operator">=</span><span class="token string">"elasticsearch-blue"</span>
<span class="token assign-left variable">NEW_STACK</span><span class="token operator">=</span><span class="token string">"elasticsearch-green"</span>
<span class="token assign-left variable">LOAD_BALANCER_CONFIG</span><span class="token operator">=</span><span class="token string">"/etc/nginx/upstream.conf"</span>

<span class="token function-name function">deploy_new_stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Deploying new stack: <span class="token variable">$NEW_STACK</span>"</span>
    
    <span class="token comment"># Deploy green stack with new version</span>
    <span class="token function">docker</span> stack deploy <span class="token parameter variable">-c</span> docker-compose.green.yml <span class="token variable">$NEW_STACK</span>
    
    <span class="token comment"># Wait for green stack to be healthy</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Waiting for green stack to be ready..."</span>
    <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">600</span>
    <span class="token assign-left variable">elapsed</span><span class="token operator">=</span><span class="token number">0</span>
    
    <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$elapsed</span> <span class="token parameter variable">-lt</span> <span class="token variable">$timeout</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token assign-left variable">green_health</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"http://green-coordinating:9200/_cluster/health"</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.status'</span><span class="token variable">)</span></span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$green_health</span>"</span> <span class="token operator">=</span> <span class="token string">"green"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">"Green stack is healthy"</span>
            <span class="token builtin class-name">break</span>
        <span class="token keyword">fi</span>
        <span class="token function">sleep</span> <span class="token number">10</span>
        <span class="token assign-left variable">elapsed</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>elapsed <span class="token operator">+</span> <span class="token number">10</span><span class="token variable">))</span></span>
    <span class="token keyword">done</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$elapsed</span> <span class="token parameter variable">-ge</span> <span class="token variable">$timeout</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Green stack failed to become healthy"</span>
        <span class="token function">docker</span> stack <span class="token function">rm</span> <span class="token variable">$NEW_STACK</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function-name function">migrate_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Migrating data from blue to green..."</span>
    
    <span class="token comment"># Use remote reindex for data migration</span>
    <span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">"http://green-coordinating:9200/_reindex"</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
         <span class="token parameter variable">-d</span> <span class="token string">'{
           "source": {
             "remote": {
               "host": "http://blue-coordinating:9200"
             },
             "index": "*"
           },
           "dest": {
             "index": "migrated-data"
           }
         }'</span>
    
    <span class="token comment"># Monitor reindex progress</span>
    <span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token assign-left variable">reindex_status</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"http://green-coordinating:9200/_tasks"</span> <span class="token operator">|</span> jq <span class="token string">'.nodes[].tasks | to_entries[] | select(.value.action == "indices:data/write/reindex") | .value.status'</span><span class="token variable">)</span></span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$reindex_status</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">"Data migration completed"</span>
            <span class="token builtin class-name">break</span>
        <span class="token keyword">fi</span>
        <span class="token function">sleep</span> <span class="token number">30</span>
    <span class="token keyword">done</span>
<span class="token punctuation">}</span>

<span class="token function-name function">switch_traffic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Switching traffic to green stack..."</span>
    
    <span class="token comment"># Update load balancer configuration</span>
    <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/blue-coordinating/green-coordinating/g'</span> <span class="token variable">$LOAD_BALANCER_CONFIG</span>
    nginx <span class="token parameter variable">-s</span> reload
    
    <span class="token comment"># Verify traffic switch</span>
    <span class="token function">sleep</span> <span class="token number">10</span>
    <span class="token assign-left variable">current_backend</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"http://localhost:9200"</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.cluster_name'</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Currently serving from cluster: <span class="token variable">$current_backend</span>"</span>
<span class="token punctuation">}</span>

<span class="token function-name function">cleanup_old_stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Cleaning up blue stack..."</span>
    
    <span class="token comment"># Wait for any in-flight requests to complete</span>
    <span class="token function">sleep</span> <span class="token number">60</span>
    
    <span class="token comment"># Remove old stack</span>
    <span class="token function">docker</span> stack <span class="token function">rm</span> <span class="token variable">$CURRENT_STACK</span>
    
    <span class="token builtin class-name">echo</span> <span class="token string">"Blue-green deployment completed successfully"</span>
<span class="token punctuation">}</span>

<span class="token comment"># Main deployment process</span>
<span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    deploy_new_stack
    migrate_data
    switch_traffic
    cleanup_old_stack
<span class="token punctuation">}</span>

main
</code></pre>
</div>

        <h3 id="rolling-update-strategy" class="group relative scroll-mt-20 text-xl font-semibold mb-3 mt-5">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#rolling-update-strategy">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Rolling Update Strategy</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#rolling-update-strategy" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h3>
      
<div class="highlight highlight-bash notranslate" style="background-color: transparent !important; border: none !important; border-radius: 0px !important; padding: 0px !important; margin: 0px !important;">
<pre class="notranslate language-bash" tabindex="0" style="border-radius: 0.75rem !important; padding: 16px !important; margin: 16px 0px !important; overflow-x: auto !important; font-size: 14px !important; line-height: 1.5 !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><code class="language-bash" style="background: transparent !important; border: none !important; border-radius: 0px !important; font-family: ui-monospace, SFMono-Regular, &quot;SF Mono&quot;, Consolas, &quot;Liberation Mono&quot;, Menlo, monospace !important; font-size: 15px !important; line-height: 1.6 !important; padding: 0px !important; font-weight: 500 !important; text-rendering: geometricprecision !important; -webkit-font-smoothing: subpixel-antialiased !important; letter-spacing: 0.025em !important; white-space: pre-wrap !important; overflow-wrap: normal !important; text-wrap-style: initial !important; word-break: normal !important;"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># rolling-update.sh - Rolling updates with minimal disruption</span>

<span class="token assign-left variable">CLUSTER_URL</span><span class="token operator">=</span><span class="token string">"http://localhost:9200"</span>
<span class="token assign-left variable">NEW_IMAGE</span><span class="token operator">=</span><span class="token string">"docker.elastic.co/elasticsearch/elasticsearch:9.1.5"</span>

<span class="token function-name function">update_data_nodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Starting rolling update of data nodes..."</span>
    
    <span class="token assign-left variable">data_nodes</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">--filter</span> <span class="token assign-left variable">name</span><span class="token operator">=</span>*-data-* <span class="token parameter variable">--format</span> <span class="token string">"{{.Names}}"</span><span class="token variable">)</span></span>
    
    <span class="token keyword">for</span> <span class="token for-or-select variable">node</span> <span class="token keyword">in</span> <span class="token variable">$data_nodes</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Updating node: <span class="token variable">$node</span>"</span>
        
        <span class="token comment"># Disable shard allocation</span>
        <span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">"<span class="token variable">$CLUSTER_URL</span>/_cluster/settings"</span> <span class="token punctuation">\</span>
             <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
             <span class="token parameter variable">-d</span> <span class="token string">'{
               "persistent": {
                 "cluster.routing.allocation.enable": "primaries"
               }
             }'</span>
        
        <span class="token comment"># Stop node gracefully</span>
        <span class="token function">docker</span> stop <span class="token variable">$node</span>
        
        <span class="token comment"># Update container with new image</span>
        <span class="token assign-left variable">container_config</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> inspect $node<span class="token variable">)</span></span>
        <span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable">$node</span>
        
        <span class="token comment"># Recreate container with new image</span>
        <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> <span class="token variable">$node</span> <span class="token punctuation">\</span>
               <span class="token parameter variable">--network</span> elasticsearch-production_elastic-network <span class="token punctuation">\</span>
               <span class="token parameter variable">--restart</span> unless-stopped <span class="token punctuation">\</span>
               <span class="token parameter variable">-e</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> inspect $node <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.[0].Config.Env[]'</span><span class="token variable">)</span></span>"</span> <span class="token punctuation">\</span>
               <span class="token parameter variable">-v</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> inspect $node <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.[0].Mounts[].Source'</span><span class="token variable">)</span></span>:<span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> inspect $node <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.[0].Mounts[].Destination'</span><span class="token variable">)</span></span>"</span> <span class="token punctuation">\</span>
               <span class="token variable">$NEW_IMAGE</span>
        
        <span class="token comment"># Wait for node to rejoin cluster</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Waiting for <span class="token variable">$node</span> to rejoin cluster..."</span>
        <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">300</span>
        <span class="token assign-left variable">elapsed</span><span class="token operator">=</span><span class="token number">0</span>
        
        <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$elapsed</span> <span class="token parameter variable">-lt</span> <span class="token variable">$timeout</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
            <span class="token assign-left variable">node_status</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$CLUSTER_URL</span>/_cat/nodes"</span> <span class="token operator">|</span> <span class="token function">grep</span> $node <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span><span class="token variable">)</span></span>
            <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$node_status</span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$node</span> has rejoined the cluster"</span>
                <span class="token builtin class-name">break</span>
            <span class="token keyword">fi</span>
            <span class="token function">sleep</span> <span class="token number">10</span>
            <span class="token assign-left variable">elapsed</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>elapsed <span class="token operator">+</span> <span class="token number">10</span><span class="token variable">))</span></span>
        <span class="token keyword">done</span>
        
        <span class="token comment"># Re-enable shard allocation</span>
        <span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">"<span class="token variable">$CLUSTER_URL</span>/_cluster/settings"</span> <span class="token punctuation">\</span>
             <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
             <span class="token parameter variable">-d</span> <span class="token string">'{
               "persistent": {
                 "cluster.routing.allocation.enable": "all"
               }
             }'</span>
        
        <span class="token comment"># Wait for cluster to be green</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Waiting for cluster health..."</span>
        <span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
            <span class="token assign-left variable">health</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$CLUSTER_URL</span>/_cluster/health"</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.status'</span><span class="token variable">)</span></span>
            <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$health</span>"</span> <span class="token operator">=</span> <span class="token string">"green"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                <span class="token builtin class-name">echo</span> <span class="token string">"Cluster is healthy, proceeding to next node"</span>
                <span class="token builtin class-name">break</span>
            <span class="token keyword">fi</span>
            <span class="token function">sleep</span> <span class="token number">30</span>
        <span class="token keyword">done</span>
        
        <span class="token function">sleep</span> <span class="token number">30</span>  <span class="token comment"># Additional safety margin</span>
    <span class="token keyword">done</span>
<span class="token punctuation">}</span>

<span class="token function-name function">update_master_nodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Starting rolling update of master nodes..."</span>
    
    <span class="token assign-left variable">master_nodes</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">--filter</span> <span class="token assign-left variable">name</span><span class="token operator">=</span>*-master-* <span class="token parameter variable">--format</span> <span class="token string">"{{.Names}}"</span><span class="token variable">)</span></span>
    
    <span class="token comment"># Update master nodes one at a time</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">node</span> <span class="token keyword">in</span> <span class="token variable">$master_nodes</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Updating master node: <span class="token variable">$node</span>"</span>
        
        <span class="token comment"># Similar process to data nodes but with additional master-specific checks</span>
        <span class="token comment"># ... (implementation similar to data nodes)</span>
        
        <span class="token builtin class-name">echo</span> <span class="token string">"Master node <span class="token variable">$node</span> updated successfully"</span>
        <span class="token function">sleep</span> <span class="token number">60</span>  <span class="token comment"># Longer wait between master node updates</span>
    <span class="token keyword">done</span>
<span class="token punctuation">}</span>

<span class="token comment"># Main update process</span>
<span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Starting rolling update process..."</span>
    
    <span class="token comment"># Check cluster health before starting</span>
    <span class="token assign-left variable">initial_health</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$CLUSTER_URL</span>/_cluster/health"</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.status'</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$initial_health</span>"</span> <span class="token operator">!=</span> <span class="token string">"green"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Cluster is not green (<span class="token variable">$initial_health</span>). Aborting update."</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
    <span class="token keyword">fi</span>
    
    update_data_nodes
    update_master_nodes
    
    <span class="token builtin class-name">echo</span> <span class="token string">"Rolling update completed successfully"</span>
    
    <span class="token comment"># Final health check</span>
    <span class="token assign-left variable">final_health</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$CLUSTER_URL</span>/_cluster/health"</span> <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> <span class="token string">'.status'</span><span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Final cluster health: <span class="token variable">$final_health</span>"</span>
<span class="token punctuation">}</span>

main
</code></pre>
</div>
<hr>

        <h2 id="conclusion" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#conclusion">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Conclusion</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#conclusion" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      
<p>Docker provides an excellent middle ground for Elasticsearch deployments, offering container benefits without the complexity of full Kubernetes orchestration. It's particularly well-suited for:</p>
<p><strong>Ideal Use Cases:</strong></p>
<ul>
<li>Medium-scale deployments (1-50TB)</li>
<li>Teams with Docker expertise</li>
<li>Cost-conscious organizations</li>
<li>Rapid deployment requirements</li>
<li>Development and staging environments</li>
</ul>
<p><strong>Key Advantages:</strong></p>
<ul>
<li><strong>Simplified Operations</strong>: Easier than Kubernetes, more flexible than VMs</li>
<li><strong>Cost Effective</strong>: 40-60% cost savings compared to managed services</li>
<li><strong>Container Benefits</strong>: Consistency, portability, and resource efficiency</li>
<li><strong>Rapid Scaling</strong>: Quick horizontal scaling with Docker Compose/Swarm</li>
<li><strong>Production Ready</strong>: Battle-tested configurations for high availability</li>
</ul>
<p><strong>When to Consider Alternatives:</strong></p>
<ul>
<li>Very large scale (&gt;100TB)  Consider self-managed VMs or Kubernetes</li>
<li>Small team with limited ops capacity  Consider Elastic Cloud</li>
<li>Complex multi-region requirements  Consider Kubernetes</li>
<li>Strict compliance needs  Evaluate managed services</li>
</ul>
<p>Docker-based Elasticsearch deployments offer the sweet spot of operational simplicity and infrastructure control, making them an excellent choice for many production scenarios. With proper planning, monitoring, and operational procedures, Docker can provide enterprise-grade search infrastructure at a fraction of the cost of managed alternatives.</p>
<p><strong>Next Steps:</strong>
Ready to implement your Docker Elasticsearch deployment? Use the provided configurations as starting points, adapt them to your specific requirements, and follow the deployment checklists for production success.</p>
<hr>
<p><strong><a href="https://thisiskushal31.github.io/blog/#/blog/kubernetes-elasticsearch-eck-helm-raw-yaml-deep-dive" target="_blank" rel="noopener noreferrer">Continue to Blog 5: Kubernetes Elasticsearch - ECK vs Helm vs Raw YAML </a></strong></p>
<hr>

        <h2 id="additional-resources" class="group relative scroll-mt-20 text-2xl font-semibold mb-4 mt-6 border-b border-gray-200 dark:border-gray-700 pb-2">
          <a class="anchor absolute -ml-10 flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200" aria-label="Link to this section" href="#additional-resources">
            <svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true">
              <path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path>
            </svg>
          </a>
          <span>Additional Resources</span>
        <a href="#/blog/docker-elasticsearch-container-deployment-strategies#additional-resources" class="header-link" style="opacity: 0; margin-left: 8px; text-decoration: none; color: rgb(107, 114, 128); transition: opacity 0.2s; cursor: pointer;">#</a></h2>
      
<ul>
<li><strong><a href="https://github.com/your-repo/elasticsearch-docker-scripts" target="_blank" rel="noopener noreferrer">Complete Deployment Scripts</a></strong></li>
<li><strong><a href="https://github.com/your-repo/elasticsearch-monitoring" target="_blank" rel="noopener noreferrer">Monitoring Dashboards</a></strong></li>
<li><strong><a href="https://github.com/your-repo/elasticsearch-security-configs" target="_blank" rel="noopener noreferrer">Security Templates</a></strong></li>
<li><strong><a href="https://github.com/your-repo/elasticsearch-performance-tests" target="_blank" rel="noopener noreferrer">Performance Testing Tools</a></strong></li>
</ul>
<hr>
<p><strong>Fact-Checking &amp; Verification:</strong> This blog post contains technical specifications, Docker configurations, and best practices based on publicly available documentation and industry research. Docker commands and configurations may vary by version and environment. For the most current and accurate information, please consult:</p>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" target="_blank" rel="noopener noreferrer">Elasticsearch Official Documentation</a></li>
<li><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">Docker Official Documentation</a></li>
<li><a href="https://www.docker.elastic.co/r/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch Docker Images</a></li>
</ul>
<p><em>This blog is part of the Complete Elasticsearch Deployment Mastery Series. For the full series navigation and additional resources, visit the <a href="link-to-hub" target="_blank" rel="noopener noreferrer">series hub</a>.</em></p>
</div></div></div></div></article><section class="py-12 px-4 bg-muted/30"><div class="max-w-7xl mx-auto"><h2 class="text-3xl font-bold text-foreground mb-8 text-center">More Articles</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"><div class="blog-card fade-in-up" style="animation-delay: 0ms;"><div class="space-y-4"><div class="flex flex-wrap gap-2"><span class="tag text-xs">MySQL</span><span class="tag text-xs">Docker</span></div><h3 class="text-xl font-semibold text-foreground hover:text-primary transition-colors duration-200 line-clamp-2"><a href="#/blog/mysql-docker-container-deployment-strategies">Containerized MySQL - Docker Production Strategies</a></h3><p class="text-muted-foreground line-clamp-3">Complete guide to MySQL containerization with Docker covering Docker Compose production configurations, persistent volumes, security, multi-node setups, and Docker Swarm orchestration. Includes official Docker and MySQL documentation references.</p><div class="flex items-center justify-between text-sm text-muted-foreground"><span>January 15, 2025</span><span>3 min read</span></div></div></div><div class="blog-card fade-in-up" style="animation-delay: 100ms;"><div class="space-y-4"><div class="flex flex-wrap gap-2"><span class="tag text-xs">MongoDB</span><span class="tag text-xs">Docker</span></div><h3 class="text-xl font-semibold text-foreground hover:text-primary transition-colors duration-200 line-clamp-2"><a href="#/blog/mongodb-docker-container-deployment-strategies">Docker MongoDB - Container Deployment Strategies</a></h3><p class="text-muted-foreground line-clamp-3">Complete guide to MongoDB containerization with Docker. Learn Docker Compose production configurations, data persistence strategies, security best practices, and multi-node setups.</p><div class="flex items-center justify-between text-sm text-muted-foreground"><span>January 31, 2025</span><span>2 min read</span></div></div></div><div class="blog-card fade-in-up" style="animation-delay: 200ms;"><div class="space-y-4"><div class="flex flex-wrap gap-2"><span class="tag text-xs">Redis</span><span class="tag text-xs">Docker</span></div><h3 class="text-xl font-semibold text-foreground hover:text-primary transition-colors duration-200 line-clamp-2"><a href="#/blog/redis-docker-container-deployment-strategies">Docker Redis - Container Deployment Strategies</a></h3><p class="text-muted-foreground line-clamp-3">Complete guide to Redis containerization with Docker. Learn Docker Compose production configurations, data persistence strategies, security best practices, and multi-node setups.</p><div class="flex items-center justify-between text-sm text-muted-foreground"><span>February 8, 2025</span><span>2 min read</span></div></div></div></div></div></section></div></main></div></div>
    <script>
      // GitHub Pages SPA redirect for clean URLs
      // This script converts clean URLs like /blog/post-name to hash URLs like /#/blog/post-name
      (function() {
        var path = window.location.pathname;
        var search = window.location.search;
        var hash = window.location.hash;
        
        // Handle root blog path: /blog/ -> /blog/#/blog
        if (path === '/blog/' && !hash) {
          // Store the original URL for the 404.html redirect
          sessionStorage.redirect = window.location.href;
          // Redirect to hash version: /blog/#/blog
          window.location.replace('/blog/#/blog');
        }
        // If we're on a clean URL (not already a hash URL), redirect to hash version
        else if (path !== '/blog/' && path.startsWith('/blog/') && !hash) {
          var cleanPath = path.replace('/blog/', '');
          if (cleanPath) {
            // Store the original URL for the 404.html redirect
            sessionStorage.redirect = window.location.href;
            // Redirect to hash version: /blog/#/blog/post-name
            window.location.replace('/blog/#/blog/' + cleanPath);
          }
        }
        // Handle direct post URLs like /post-name (even cleaner)
        else if (path !== '/' && !path.startsWith('/blog/') && !hash && path !== '/blog/') {
          var postSlug = path.substring(1); // Remove leading slash
          if (postSlug) {
            // Store the original URL for the 404.html redirect
            sessionStorage.redirect = window.location.href;
            // Redirect to hash version: /blog/#/blog/post-name
            window.location.replace('/blog/#/blog/' + postSlug);
          }
        }
      })();
    </script>
  

</body></html>